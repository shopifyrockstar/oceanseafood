<script>
  {% if template == 'cart' %}
  var deliverCart = [ {% for item in cart.items %} {id:{{item.id}},title:'{{item.title}}',tags: '{% for tag in item.product.tags %}{{tag}}{% unless forloop.last %},{% endunless %}{% endfor %}'}{% unless forloop.last %},{% endunless %} {% endfor %}];
  {% else if template == product %}
  var deliverProduct = {{product | json}};
  {% endif %}
  for(var pathArray=window.location.pathname.split("/"),cart=!1,isProduct=!1,i=0;i<pathArray.length;i++)"cart"==pathArray[i]&&(cart=!0);for(var i=0;i<pathArray.length;i++)"products"==pathArray[i]&&(isProduct=!0);function parseQuery(t){var e=new Object;if(!t)return e;for(var i=t.split(/[;&]/),a=0;a<i.length;a++){var r=i[a].split("=");if(r&&2==r.length){var o=unescape(r[0]),n=unescape(r[1]);n=n.replace(/\+/g," "),e[o]=n}}return e}var shopName="{{shop.permanent_domain}}";function toTheDay(){var t=jQuery(".tbtDeliveryCalendar").tbtDatepicker("getDate");return $.tbtDatepicker.formatDate("DD",t)}function myJQueryCode(){if(jQuery("form[action='/cart']").length||jQuery("#cart_form").length||jQuery("#cartform").length||jQuery(".template--cart .layout--main-content .panel>div>form").length){if(initDelivery(),jQuery("#cart_form").length)var cartForm=jQuery("#cart_form");else if(jQuery("#cartform").length)var cartForm=jQuery("#cartform");else if(jQuery(".cart-wrapper form[action='/cart']").length)var cartForm=jQuery(".cart-wrapper form[action='/cart']");else if(jQuery("form[action='/cart']").length)var cartForm=jQuery("form[action='/cart']");else if(jQuery(".template--cart .layout--main-content .panel>div>form").length)var cartForm=jQuery(".template--cart .layout--main-content .panel>div>form");jQuery(".tbtDeliveryCalendar").length||cartForm.append("<div class='tbtDeliveryCalendar'></div>"),jQuery("[name='attributes[Delivery Date]']").length||cartForm.append('<input type="hidden" name="attributes[Delivery Date]" class="tbtDeliveryDateVal">'),jQuery("[name='attributes[Delivery Day]']").length||cartForm.append('<input type="hidden" name="attributes[Delivery Day]" class="tbtDeliveryDayVal">');var tbtTableStyle='.tbt-icon-circle-triangle-w,.tbt-icon-circle-triangle-w{text-align: left;}.tbtDeliveryCalendar .tbt-datepicker-calendar thead{display: table-row-group}.tbtDeliveryCalendar .tbt-datepicker-calendar tbody{display: table-row-group}.tbtDeliveryCalendar .tbt-datepicker-calendar{display:table}.tbtDeliveryCalendar{font-size:16px;max-width: 100%;}table.tbt-datepicker-calendar tr{position: static;display: table-row;border:none !important;}.tbtDeliveryCalendar.tbtRequired>.tbt-datepicker,select.deliveryAdditionField.tbtRequired,select.deliveryTime.tbtRequired{border: 1px solid red;}select.deliveryAdditionField,select.deliveryTime{display:block;margin:auto;width:273px;max-width:100%;margin-top:20px;}.deliveryRequired{display: none; color: red; font-size: 16px; text-align: center;}table.tbt-datepicker-calendar{border: none}.tbtHeading{width:100%;text-align: center; font-weight: bold; font-size: 18px;margin-top: 20px;}.tbtDeliveryCalendar>div{margin: auto;margin-top: 20px;margin-bottom: 20px;}.tbt-helper-hidden{display:none}.tbt-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.tbt-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.tbt-helper-clearfix:before,.tbt-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.tbt-helper-clearfix:after{clear:both}.tbt-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.tbt-front{z-index:100}.tbt-state-disabled{cursor:default!important;pointer-events:none}.tbt-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.tbt-widget-icon-block{left:50%;margin-left:-8px;display:block}.tbt-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.tbt-datepicker{width:500px;padding:.2em .2em 0;display:none;max-width: 100%;}.tbt-datepicker .tbt-datepicker-header{position:relative;padding:.2em 0}.tbt-datepicker .tbt-datepicker-prev,.tbt-datepicker .tbt-datepicker-next{position:absolute;top:3px;width:1.8em;height:1.8em}.tbt-datepicker .tbt-datepicker-prev-hover,.tbt-datepicker .tbt-datepicker-next-hover{top:3px}.tbt-datepicker .tbt-datepicker-prev{left:2px}.tbt-datepicker .tbt-datepicker-next{right:2px}.tbt-datepicker .tbt-datepicker-prev-hover{left:1px}.tbt-datepicker .tbt-datepicker-next-hover{right:1px}.tbt-datepicker .tbt-datepicker-prev span,.tbt-datepicker .tbt-datepicker-next span{font-size:0;display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.tbt-datepicker .tbt-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.tbt-datepicker .tbt-datepicker-title select{font-size:1em;margin:1px 0}.tbt-datepicker select.tbt-datepicker-month,.tbt-datepicker select.tbt-datepicker-year{width:45%}.tbt-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.tbt-datepicker th{display: table-cell;padding:.7em .3em;text-align:center;font-weight:bold;border:0}.tbt-datepicker td:before{display: none;}.tbt-datepicker td{display: table-cell !important;padding: 1px !important;border: 0 !important;border:0;padding:1px}.tbt-datepicker td span,.tbt-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.tbt-datepicker .tbt-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.tbt-datepicker .tbt-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.tbt-datepicker .tbt-datepicker-buttonpane button.tbt-datepicker-current{float:left}.tbt-datepicker.tbt-datepicker-multi{width:auto}.tbt-datepicker-multi .tbt-datepicker-group{float:left}.tbt-datepicker-multi .tbt-datepicker-group table{width:95%;margin:0 auto .4em}.tbt-datepicker-multi-2 .tbt-datepicker-group{width:100%}.tbt-datepicker-multi-3 .tbt-datepicker-group{width:33.3%}.tbt-datepicker-multi-4 .tbt-datepicker-group{width:25%}.tbt-datepicker-multi .tbt-datepicker-group-last .tbt-datepicker-header,.tbt-datepicker-multi .tbt-datepicker-group-middle .tbt-datepicker-header{border-left-width:0}.tbt-datepicker-multi .tbt-datepicker-buttonpane{clear:left}.tbt-datepicker-row-break{clear:both;width:100%;font-size:0}.tbt-datepicker-rtl{direction:rtl}.tbt-datepicker-rtl .tbt-datepicker-prev{right:2px;left:auto}.tbt-datepicker-rtl .tbt-datepicker-next{left:2px;right:auto}.tbt-datepicker-rtl .tbt-datepicker-prev:hover{right:1px;left:auto}.tbt-datepicker-rtl .tbt-datepicker-next:hover{left:1px;right:auto}.tbt-datepicker-rtl .tbt-datepicker-buttonpane{clear:right}.tbt-datepicker-rtl .tbt-datepicker-buttonpane button{float:left}.tbt-datepicker-rtl .tbt-datepicker-buttonpane button.tbt-datepicker-current,.tbt-datepicker-rtl .tbt-datepicker-group{float:right}.tbt-datepicker-rtl .tbt-datepicker-group-last .tbt-datepicker-header,.tbt-datepicker-rtl .tbt-datepicker-group-middle .tbt-datepicker-header{border-right-width:0;border-left-width:1px}.tbt-datepicker .tbt-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat;left:.5em;top:.3em}.tbt-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.tbt-widget .tbt-widget{font-size:1em}.tbt-widget input,.tbt-widget select,.tbt-widget textarea,.tbt-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.tbt-widget.tbt-widget-content{max-width:100%;border:1px solid #c5c5c5}.tbt-widget-content{border:1px solid #ddd;background:#fff;color:#333}.tbt-widget-content a{color:#333}.tbt-widget-header{border:1px solid transparent;background:#e9e9e9;color:#fff;font-weight:bold}.tbt-widget-header a{color:#333}.tbt-state-default,.tbt-widget-content .tbt-state-default,.tbt-widget-header .tbt-state-default,.tbt-button,html .tbt-button.tbt-state-disabled:hover,html .tbt-button.tbt-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.tbt-state-default a,.tbt-state-default a:link,.tbt-state-default a:visited,a.tbt-button,a:link.tbt-button,a:visited.tbt-button,.tbt-button{color:#454545;text-decoration:none}.tbt-state-hover,.tbt-widget-content .tbt-state-hover,.tbt-widget-header .tbt-state-hover,.tbt-state-focus,.tbt-widget-content .tbt-state-focus,.tbt-widget-header .tbt-state-focus,.tbt-button:hover,.tbt-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.tbt-state-hover a,.tbt-state-hover a:hover,.tbt-state-hover a:link,.tbt-state-hover a:visited,.tbt-state-focus a,.tbt-state-focus a:hover,.tbt-state-focus a:link,.tbt-state-focus a:visited,a.tbt-button:hover,a.tbt-button:focus{color:#2b2b2b;text-decoration:none}.tbt-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.tbt-state-active,.tbt-widget-content .tbt-state-active,.tbt-widget-header .tbt-state-active,a.tbt-button:active,.tbt-button:active,.tbt-button.tbt-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.tbt-icon-background,.tbt-state-active .tbt-icon-background{border:#003eff;background-color:#fff}.tbt-state-active a,.tbt-state-active a:link,.tbt-state-active a:visited{color:#fff;text-decoration:none}.tbt-state-checked{border:1px solid #dad55e;background:#fffa90}.tbt-state-highlight a,.tbt-widget-content .tbt-state-highlight a,.tbt-widget-header .tbt-state-highlight a{color:#777620}.tbt-state-error,.tbt-widget-content .tbt-state-error,.tbt-widget-header .tbt-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.tbt-state-error a,.tbt-widget-content .tbt-state-error a,.tbt-widget-header .tbt-state-error a{color:#5f3f3f}.tbt-state-error-text,.tbt-widget-content .tbt-state-error-text,.tbt-widget-header .tbt-state-error-text{color:#5f3f3f}.tbt-priority-primary,.tbt-widget-content .tbt-priority-primary,.tbt-widget-header .tbt-priority-primary{font-weight:bold}.tbt-priority-secondary,.tbt-widget-content .tbt-priority-secondary,.tbt-widget-header .tbt-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.tbt-state-disabled,.tbt-widget-content .tbt-state-disabled,.tbt-widget-header .tbt-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.tbt-state-disabled .tbt-icon{filter:Alpha(Opacity=35)}.tbt-icon{width:16px;height:16px}.tbt-icon,.tbt-widget-content .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_ffffff_256x240.png")}.tbt-widget-header .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_ffffff_256x240.png")}.tbt-state-hover .tbt-icon,.tbt-state-focus .tbt-icon,.tbt-button:hover .tbt-icon,.tbt-button:focus .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_555555_256x240.png")}.tbt-state-active .tbt-icon,.tbt-button:active .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_ffffff_256x240.png")}.tbt-state-highlight .tbt-icon,.tbt-button .tbt-state-highlight.tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_777620_256x240.png")}.tbt-state-error .tbt-icon,.tbt-state-error-text .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_cc0000_256x240.png")}.tbt-button .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_777777_256x240.png")}.tbt-icon-blank{background-position:16px 16px}.tbt-icon-caret-1-n{background-position:0 0}.tbt-icon-caret-1-ne{background-position:-16px 0}.tbt-icon-caret-1-e{background-position:-32px 0}.tbt-icon-caret-1-se{background-position:-48px 0}.tbt-icon-caret-1-s{background-position:-65px 0}.tbt-icon-caret-1-sw{background-position:-80px 0}.tbt-icon-caret-1-w{background-position:-96px 0}.tbt-icon-caret-1-nw{background-position:-112px 0}.tbt-icon-caret-2-n-s{background-position:-128px 0}.tbt-icon-caret-2-e-w{background-position:-144px 0}.tbt-icon-triangle-1-n{background-position:0 -16px}.tbt-icon-triangle-1-ne{background-position:-16px -16px}.tbt-icon-triangle-1-e{background-position:-32px -16px}.tbt-icon-triangle-1-se{background-position:-48px -16px}.tbt-icon-triangle-1-s{background-position:-65px -16px}.tbt-icon-triangle-1-sw{background-position:-80px -16px}.tbt-icon-triangle-1-w{background-position:-96px -16px}.tbt-icon-triangle-1-nw{background-position:-112px -16px}.tbt-icon-triangle-2-n-s{background-position:-128px -16px}.tbt-icon-triangle-2-e-w{background-position:-144px -16px}.tbt-icon-arrow-1-n{background-position:0 -32px}.tbt-icon-arrow-1-ne{background-position:-16px -32px}.tbt-icon-arrow-1-e{background-position:-32px -32px}.tbt-icon-arrow-1-se{background-position:-48px -32px}.tbt-icon-arrow-1-s{background-position:-65px -32px}.tbt-icon-arrow-1-sw{background-position:-80px -32px}.tbt-icon-arrow-1-w{background-position:-96px -32px}.tbt-icon-arrow-1-nw{background-position:-112px -32px}.tbt-icon-arrow-2-n-s{background-position:-128px -32px}.tbt-icon-arrow-2-ne-sw{background-position:-144px -32px}.tbt-icon-arrow-2-e-w{background-position:-160px -32px}.tbt-icon-arrow-2-se-nw{background-position:-176px -32px}.tbt-icon-arrowstop-1-n{background-position:-192px -32px}.tbt-icon-arrowstop-1-e{background-position:-208px -32px}.tbt-icon-arrowstop-1-s{background-position:-224px -32px}.tbt-icon-arrowstop-1-w{background-position:-240px -32px}.tbt-icon-arrowthick-1-n{background-position:1px -48px}.tbt-icon-arrowthick-1-ne{background-position:-16px -48px}.tbt-icon-arrowthick-1-e{background-position:-32px -48px}.tbt-icon-arrowthick-1-se{background-position:-48px -48px}.tbt-icon-arrowthick-1-s{background-position:-64px -48px}.tbt-icon-arrowthick-1-sw{background-position:-80px -48px}.tbt-icon-arrowthick-1-w{background-position:-96px -48px}.tbt-icon-arrowthick-1-nw{background-position:-112px -48px}.tbt-icon-arrowthick-2-n-s{background-position:-128px -48px}.tbt-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.tbt-icon-arrowthick-2-e-w{background-position:-160px -48px}.tbt-icon-arrowthick-2-se-nw{background-position:-176px -48px}.tbt-icon-arrowthickstop-1-n{background-position:-192px -48px}.tbt-icon-arrowthickstop-1-e{background-position:-208px -48px}.tbt-icon-arrowthickstop-1-s{background-position:-224px -48px}.tbt-icon-arrowthickstop-1-w{background-position:-240px -48px}.tbt-icon-arrowreturnthick-1-w{background-position:0 -64px}.tbt-icon-arrowreturnthick-1-n{background-position:-16px -64px}.tbt-icon-arrowreturnthick-1-e{background-position:-32px -64px}.tbt-icon-arrowreturnthick-1-s{background-position:-48px -64px}.tbt-icon-arrowreturn-1-w{background-position:-64px -64px}.tbt-icon-arrowreturn-1-n{background-position:-80px -64px}.tbt-icon-arrowreturn-1-e{background-position:-96px -64px}.tbt-icon-arrowreturn-1-s{background-position:-112px -64px}.tbt-icon-arrowrefresh-1-w{background-position:-128px -64px}.tbt-icon-arrowrefresh-1-n{background-position:-144px -64px}.tbt-icon-arrowrefresh-1-e{background-position:-160px -64px}.tbt-icon-arrowrefresh-1-s{background-position:-176px -64px}.tbt-icon-arrow-4{background-position:0 -80px}.tbt-icon-arrow-4-diag{background-position:-16px -80px}.tbt-icon-extlink{background-position:-32px -80px}.tbt-icon-newwin{background-position:-48px -80px}.tbt-icon-refresh{background-position:-64px -80px}.tbt-icon-shuffle{background-position:-80px -80px}.tbt-icon-transfer-e-w{background-position:-96px -80px}.tbt-icon-transferthick-e-w{background-position:-112px -80px}.tbt-icon-folder-collapsed{background-position:0 -96px}.tbt-icon-folder-open{background-position:-16px -96px}.tbt-icon-document{background-position:-32px -96px}.tbt-icon-document-b{background-position:-48px -96px}.tbt-icon-note{background-position:-64px -96px}.tbt-icon-mail-closed{background-position:-80px -96px}.tbt-icon-mail-open{background-position:-96px -96px}.tbt-icon-suitcase{background-position:-112px -96px}.tbt-icon-comment{background-position:-128px -96px}.tbt-icon-person{background-position:-144px -96px}.tbt-icon-print{background-position:-160px -96px}.tbt-icon-trash{background-position:-176px -96px}.tbt-icon-locked{background-position:-192px -96px}.tbt-icon-unlocked{background-position:-208px -96px}.tbt-icon-bookmark{background-position:-224px -96px}.tbt-icon-tag{background-position:-240px -96px}.tbt-icon-home{background-position:0 -112px}.tbt-icon-flag{background-position:-16px -112px}.tbt-icon-calendar{background-position:-32px -112px}.tbt-icon-cart{background-position:-48px -112px}.tbt-icon-pencil{background-position:-64px -112px}.tbt-icon-clock{background-position:-80px -112px}.tbt-icon-disk{background-position:-96px -112px}.tbt-icon-calculator{background-position:-112px -112px}.tbt-icon-zoomin{background-position:-128px -112px}.tbt-icon-zoomout{background-position:-144px -112px}.tbt-icon-search{background-position:-160px -112px}.tbt-icon-wrench{background-position:-176px -112px}.tbt-icon-gear{background-position:-192px -112px}.tbt-icon-heart{background-position:-208px -112px}.tbt-icon-star{background-position:-224px -112px}.tbt-icon-link{background-position:-240px -112px}.tbt-icon-cancel{background-position:0 -128px}.tbt-icon-plus{background-position:-16px -128px}.tbt-icon-plusthick{background-position:-32px -128px}.tbt-icon-minus{background-position:-48px -128px}.tbt-icon-minusthick{background-position:-64px -128px}.tbt-icon-close{background-position:-80px -128px}.tbt-icon-closethick{background-position:-96px -128px}.tbt-icon-key{background-position:-112px -128px}.tbt-icon-lightbulb{background-position:-128px -128px}.tbt-icon-scissors{background-position:-144px -128px}.tbt-icon-clipboard{background-position:-160px -128px}.tbt-icon-copy{background-position:-176px -128px}.tbt-icon-contact{background-position:-192px -128px}.tbt-icon-image{background-position:-208px -128px}.tbt-icon-video{background-position:-224px -128px}.tbt-icon-script{background-position:-240px -128px}.tbt-icon-alert{background-position:0 -144px}.tbt-icon-info{background-position:-16px -144px}.tbt-icon-notice{background-position:-32px -144px}.tbt-icon-help{background-position:-48px -144px}.tbt-icon-check{background-position:-64px -144px}.tbt-icon-bullet{background-position:-80px -144px}.tbt-icon-radio-on{background-position:-96px -144px}.tbt-icon-radio-off{background-position:-112px -144px}.tbt-icon-pin-w{background-position:-128px -144px}.tbt-icon-pin-s{background-position:-144px -144px}.tbt-icon-play{background-position:0 -160px}.tbt-icon-pause{background-position:-16px -160px}.tbt-icon-seek-next{background-position:-32px -160px}.tbt-icon-seek-prev{background-position:-48px -160px}.tbt-icon-seek-end{background-position:-64px -160px}.tbt-icon-seek-start{background-position:-80px -160px}.tbt-icon-seek-first{background-position:-80px -160px}.tbt-icon-stop{background-position:-96px -160px}.tbt-icon-eject{background-position:-112px -160px}.tbt-icon-volume-off{background-position:-128px -160px}.tbt-icon-volume-on{background-position:-144px -160px}.tbt-icon-power{background-position:0 -176px}.tbt-icon-signal-diag{background-position:-16px -176px}.tbt-icon-signal{background-position:-32px -176px}.tbt-icon-battery-0{background-position:-48px -176px}.tbt-icon-battery-1{background-position:-64px -176px}.tbt-icon-battery-2{background-position:-80px -176px}.tbt-icon-battery-3{background-position:-96px -176px}.tbt-icon-circle-plus{background-position:0 -192px}.tbt-icon-circle-minus{background-position:-16px -192px}.tbt-icon-circle-close{background-position:-32px -192px}.tbt-icon-circle-triangle-e{background-position:-48px -192px}.tbt-icon-circle-triangle-s{background-position:-64px -192px}.tbt-icon-circle-triangle-w{background-position:-80px -192px}.tbt-icon-circle-triangle-n{background-position:-96px -192px}.tbt-icon-circle-arrow-e{background-position:-112px -192px}.tbt-icon-circle-arrow-s{background-position:-128px -192px}.tbt-icon-circle-arrow-w{background-position:-144px -192px}.tbt-icon-circle-arrow-n{background-position:-160px -192px}.tbt-icon-circle-zoomin{background-position:-176px -192px}.tbt-icon-circle-zoomout{background-position:-192px -192px}.tbt-icon-circle-check{background-position:-208px -192px}.tbt-icon-circlesmall-plus{background-position:0 -208px}.tbt-icon-circlesmall-minus{background-position:-16px -208px}.tbt-icon-circlesmall-close{background-position:-32px -208px}.tbt-icon-squaresmall-plus{background-position:-48px -208px}.tbt-icon-squaresmall-minus{background-position:-64px -208px}.tbt-icon-squaresmall-close{background-position:-80px -208px}.tbt-icon-grip-dotted-vertical{background-position:0 -224px}.tbt-icon-grip-dotted-horizontal{background-position:-16px -224px}.tbt-icon-grip-solid-vertical{background-position:-32px -224px}.tbt-icon-grip-solid-horizontal{background-position:-48px -224px}.tbt-icon-gripsmall-diagonal-se{background-position:-64px -224px}.tbt-icon-grip-diagonal-se{background-position:-80px -224px}.tbt-corner-all,.tbt-corner-top,.tbt-corner-left,.tbt-corner-tl{border-top-left-radius:0px}.tbt-corner-all,.tbt-corner-top,.tbt-corner-right,.tbt-corner-tr{border-top-right-radius:0px}.tbt-corner-all,.tbt-corner-bottom,.tbt-corner-left,.tbt-corner-bl{border-bottom-left-radius:0px}.tbt-corner-all,.tbt-corner-bottom,.tbt-corner-right,.tbt-corner-br{border-bottom-right-radius:0px}.tbt-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.tbt-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}.tbt-state-hover,.tbt-widget-content .tbt-state-hover,.tbt-widget-header .tbt-state-hover{cursor:pointer;border-radius:0}.tbtDeliveryCalendar>div{margin: auto;margin-top: 20px;}.tbt-datepicker-calendar tr:first-child th:after, .tbt-datepicker-calendar tr:first-child td:after{border:none}';jQuery("body").append("<style>"+tbtTableStyle+"</style>");var data={};data.shop=shopName,data.action="getSettings",$.get("https://thanhhd.com/app/public/advanced-delivery/advanced-delivery.php",data,function(result){if("1"==result.enable){"Delivery Date"!=result.delivery_date_title&&jQuery(".tbtDeliveryDateVal").attr("name","attributes["+result.delivery_date_title+"]"),"Delivery Day"!=result.delivery_day_title&&jQuery(".tbtDeliveryDayVal").attr("name","attributes["+result.delivery_day_title+"]");var startWeek=parseInt(result.week_start),customCss=result.custom_css,date_format="mm/dd/yy";date_format="1"==result.date_format?"mm/dd/yy":"dd/mm/yy",jQuery("[name='attributes[Delivery Time]'], .deliveryTime, .deliveryRequired, .tbtHeading").remove();var customStyle=".tbt-widget-header{background: "+result.header_color+";border-color: "+result.border_color+";}.tbt-state-active, .tbt-widget-content .tbt-state-active, .tbt-widget-header .tbt-state-active, a.tbt-button:active, .tbt-button:active, .tbt-button.tbt-state-active:hover {border: 1px solid "+result.day_selected_color+";background: "+result.day_selected_color+";";if(customCss&&jQuery("body").append("<style>"+customStyle+"</style>"),"pro"==result.account_type&&"1"==result.enable_add_field&&result.addition_fields.length){jQuery(".deliveryAdditionField").remove(),jQuery(".tbtDeliveryCalendar").tbtDatepicker("destroy");for(var deliveryAdditionFields="<option>"+result.add_field_title+"</option>",deliveryAdditionField=result.addition_fields,i=0;i<deliveryAdditionField.length;i++){var temp='<option value="'+deliveryAdditionField[i].id+'">'+deliveryAdditionField[i].field_title+"</option>";deliveryAdditionFields+=temp}if(jQuery(".tbtDeliveryCalendar").before("<select class='deliveryAdditionField'>"+deliveryAdditionFields+"</select>"),"1"==result.required){var requiredText=result.require_text;jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').off("click").on("click",function(t){doRequired1(t,result,requiredText,cartForm)}),jQuery(".additional-checkout-button, .additional-checkout-button img").length&&jQuery(".additional-checkout-button, .additional-checkout-button img").off("click").on("click",function(t){doRequired1(t,result,requiredText,cartForm)}),cartForm.find("[name='checkout']").length?cartForm.find("[name='checkout']").off("click").on("click",function(t){doRequired1(t,result,requiredText,cartForm)}):cartForm.submit(function(t){doRequired1(t,result,requiredText,cartForm)})}jQuery(".deliveryAdditionField").on("change",function(){jQuery(".tbtDeliveryTimeVal, .tbtHeading, .deliveryTime").remove(),jQuery(".tbtDeliveryDayVal, .tbtDeliveryDateVal").val("");var that=this;if(jQuery(that).val()!=result.add_field_title)for(var fieldId=jQuery(that).val(),i=0;i<result.addition_fields.length;i++){var field=result.addition_fields[i];if(field.id==fieldId){var minDate=field.min_date;if("undefined"!=typeof deliverCart){var checkMinDate=-999;deliverCart.forEach(function(t){var e=t.tags;e.indexOf("deliveryMinDate")>-1&&e.split(",").forEach(function(t){t.indexOf("deliveryMinDate")>-1&&("max"==result.sorting?parseInt(t.replace("deliveryMinDate",""))>checkMinDate&&(checkMinDate=parseInt(t.replace("deliveryMinDate",""))):checkMinDate>parseInt(t.replace("deliveryMinDate",""))&&(checkMinDate=parseInt(t.replace("deliveryMinDate",""))))})}),-999!=checkMinDate&&(minDate=checkMinDate)}else var minDate=parseInt(field.min_date);if(parseInt(field.use_hour)){var today=(new Date).getHours();today>=parseInt(field.hour)&&(minDate+=parseInt(field.day))}var inValidDay=field.invalid_day.split(",");if(inValidDay)for(var i=0;i<inValidDay.length;i++)inValidDay[i]=parseInt(inValidDay[i]);else inValidDay=[];if(field.extra_no_available)var extraNoAvailable=field.extra_no_available.split(",");else var extraNoAvailable=!1;if("1"==result.required&&result.require_text&&(jQuery(".deliveryRequired").remove(),jQuery("<div class='deliveryRequired'></div>").insertBefore(".deliveryAdditionField")),minDate<0&&"pro"==result.account_type);else{if(result.heading&&jQuery("<div class='tbtHeading'>"+result.heading+"</div>").insertBefore(".deliveryAdditionField"),"1"==result.required){var requiredText=result.require_text;jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),jQuery(".additional-checkout-button").length&&jQuery(".additional-checkout-button").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),cartForm.find("[name='checkout']").length?cartForm.find("[name='checkout']").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}):cartForm.off("submit").on("submit",function(t){doRequired(t,result,requiredText,cartForm)})}if("1"==field.use_time&&field.delivery_time){cartForm.append('<input type="hidden" name="attributes[Delivery Time]" class="tbtDeliveryTimeVal">');for(var deliveryTimes="<option>"+field.select_time_text+"</option>",delivery_time=field.delivery_time.split(","),i=0;i<delivery_time.length;i++){var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}jQuery(".tbtDeliveryCalendar").after("<select class='deliveryTime'>"+deliveryTimes+"</select>"),jQuery(".deliveryTime").off("change").on("change",function(){jQuery(this).val()==field.select_time_text?jQuery(".tbtDeliveryTimeVal").val(""):jQuery(".tbtDeliveryTimeVal").val(jQuery(this).val())})}var maxDate=!1;result.specific_min_date&&(minDate=eval(result.specific_min_date)),result.specific_max_date&&(maxDate=eval(result.specific_max_date)),bindDatePicker(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result)}break}}})}else{var minDate=parseInt(result.min_date),productMinDates=[];if("undefined"!=typeof deliverCart&&deliverCart.forEach(function(t){var e=t.tags;e.indexOf("deliveryMinDate")>-1&&e.split(",").forEach(function(t){t.indexOf("deliveryMinDate")>-1&&productMinDates.push(parseInt(t.replace("deliveryMinDate","")))})}),productMinDates.length&&(minDate=getBigNumber(productMinDates)),parseInt(result.use_hour)&&minDate>-1){var today=(new Date).getHours();today>=parseInt(result.hour)&&(minDate+=parseInt(result.day))}var inValidDay=result.invalid_day.split(",");if(inValidDay)for(var i=0;i<inValidDay.length;i++)inValidDay[i]=parseInt(inValidDay[i]);else inValidDay=[];if(result.extra_no_available)var extraNoAvailable=result.extra_no_available.split(",");else var extraNoAvailable=!1;if("1"==result.required&&result.require_text&&jQuery("<div class='deliveryRequired'></div>").insertBefore(".tbtDeliveryCalendar"),minDate<0);else{if(result.heading&&jQuery("<div class='tbtHeading'>"+result.heading+"</div>").insertBefore(".tbtDeliveryCalendar"),"1"==result.required){var requiredText=result.require_text;jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),jQuery(".additional-checkout-button").length&&jQuery(".additional-checkout-button").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),cartForm.find("[name='checkout']").length?cartForm.find("[name='checkout']").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}):cartForm.off("submit").on("submit",function(t){doRequired(t,result,requiredText,cartForm)})}if("1"==result.use_time&&result.delivery_time){cartForm.append('<input type="hidden" name="attributes[Delivery Time]" class="tbtDeliveryTimeVal">');for(var deliveryTimes="<option>"+result.select_time_text+"</option>",delivery_time=result.delivery_time.split(","),i=0;i<delivery_time.length;i++){var d=new Date,n=d.getHours(),todayDate=d.getDate()+"/"+d.getMonth()+"/"+d.getFullYear();if("Pick Up today - last order 4pm"==delivery_time[i]&&"utopia-products-asia-upa.myshopify.com"==shopName){if(n<16&&"25/11/2017"!=todayDate&&"1/0/18 "!=todayDate){var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}}else if("Pick Up tomorrow"==delivery_time[i]&&"utopia-products-asia-upa.myshopify.com"==shopName){if("24/11/2017"!=todayDate&&"31/11/18 "!=todayDate){var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}}else{var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}}jQuery(".tbtDeliveryCalendar").after("<select class='deliveryTime'>"+deliveryTimes+"</select>"),jQuery(".deliveryTime").change(function(){if(jQuery(this).val()==result.select_time_text?jQuery(".tbtDeliveryTimeVal").val(""):jQuery(".tbtDeliveryTimeVal").val(jQuery(this).val()),"utopia-products-asia-upa.myshopify.com"==shopName)if(extraNoAvailable=result.extra_no_available.split(","),jQuery(".customDiscount").remove(),jQuery(".deliveryTime").val().indexOf("Pick Up")>-1&&cartForm.append('<input type="hidden" name="discount" class="customDiscount" value="PICKUP10">'),"Pick Up today - last order 4pm"==jQuery(".deliveryTime").val())jQuery(".tbtDeliveryCalendar").hide(),jQuery(".tbtDeliveryDateVal").val("Today"),jQuery(".tbtDeliveryDayVal").val("Pickup"),jQuery(".deliveryRequired").hide();else if("Pick Up tomorrow"==jQuery(".deliveryTime").val()){var t=new Date,e=new Date(t.getTime()+864e5);jQuery(".tbtDeliveryCalendar").tbtDatepicker("option","minDate",0),jQuery(".tbtDeliveryCalendar").tbtDatepicker("setDate",e);var i=jQuery(".tbtDeliveryCalendar").val();jQuery(".tbtDeliveryCalendar").hide(),jQuery(".tbtDeliveryDateVal").val(i),jQuery(".tbtDeliveryDayVal").val("Pickup"),jQuery(".deliveryRequired").hide()}else if("Pick Up - choose a date"==jQuery(".deliveryTime").val()){jQuery(".tbt-state-default").removeClass("tbt-state-active"),jQuery(".tbtDeliveryDateVal").val(""),jQuery(".tbtDeliveryDayVal").val(""),jQuery(".tbtDeliveryCalendar").show(),extraNoAvailable.push("25/12/2017"),extraNoAvailable.push("01/01/2018");var a=extraNoAvailable.indexOf("02/01/2018");extraNoAvailable.splice(a,1);a=extraNoAvailable.indexOf("28/12/2017");extraNoAvailable.splice(a,1),bindDatePickerAllAvailable(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result)}else"Delivery - choose a date"==jQuery(".deliveryTime").val()&&(jQuery(".tbt-state-default").removeClass("tbt-state-active"),jQuery(".tbtDeliveryDateVal").val(""),jQuery(".tbtDeliveryDayVal").val(""),jQuery(".tbtDeliveryCalendar").show(),bindDatePicker(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result))})}var maxDate=!1;result.specific_min_date&&(minDate=eval(result.specific_min_date)),result.specific_max_date&&(maxDate=eval(result.specific_max_date)),bindDatePicker(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result)}}}})}}function myJQueryCode1(){if(jQuery("form[action='/cart/add']").length||jQuery("form[action='/cart/add.js']").length){initDelivery();var data={};data.shop=shopName,data.action="getSettings",$.get("https://thanhhd.com/app/public/advanced-delivery/advanced-delivery.php",data,function(result){if("1"==result.enable_product){if(jQuery("form[action='/cart/add']").length)var cartForm=jQuery("form[action='/cart/add']");else if(jQuery("form[action='/cart/add.js']").length)var cartForm=jQuery("form[action='/cart/add.js']");jQuery(".tbtDeliveryCalendar").length||cartForm.append("<div class='tbtDeliveryCalendar'></div>"),jQuery("[name='attributes[Delivery Date]']").length||cartForm.append('<input type="hidden" name="properties[Delivery Date]" class="tbtDeliveryDateVal">'),jQuery("[name='attributes[Delivery Day]']").length||cartForm.append('<input type="hidden" name="properties[Delivery Day]" class="tbtDeliveryDayVal">');var tbtTableStyle='.tbt-icon-circle-triangle-w,.tbt-icon-circle-triangle-w{text-align: left;}.tbtDeliveryCalendar .tbt-datepicker-calendar thead{display: table-row-group}.tbtDeliveryCalendar .tbt-datepicker-calendar tbody{display: table-row-group}.tbtDeliveryCalendar .tbt-datepicker-calendar{display:table}.tbtDeliveryCalendar{font-size:16px;max-width:100%;}table.tbt-datepicker-calendar tr{position: static;display: table-row;border:none !important;}.tbtDeliveryCalendar.tbtRequired>.tbt-datepicker,select.deliveryAdditionField.tbtRequired,select.deliveryTime.tbtRequired{border: 1px solid red;}select.deliveryAdditionField,select.deliveryTime{display:block;margin:auto;width:273px;max-width:100%;margin-top:20px;}.deliveryRequired{display: none; color: red; font-size: 16px; text-align: center;}table.tbt-datepicker-calendar{border: none}.tbtHeading{text-align: center; font-weight: bold; font-size: 18px;margin-top: 20px;}.tbtDeliveryCalendar>div{margin: auto;margin-top: 20px;margin-bottom: 20px;}.tbt-helper-hidden{display:none}.tbt-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.tbt-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.tbt-helper-clearfix:before,.tbt-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.tbt-helper-clearfix:after{clear:both}.tbt-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.tbt-front{z-index:100}.tbt-state-disabled{cursor:default!important;pointer-events:none}.tbt-icon{display:inline-block;vertical-align:middle;margin-top:-.25em;position:relative;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.tbt-widget-icon-block{left:50%;margin-left:-8px;display:block}.tbt-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.tbt-datepicker{width:500px;padding:.2em .2em 0;display:none;max-width: 100%;}.tbt-datepicker .tbt-datepicker-header{position:relative;padding:.2em 0}.tbt-datepicker .tbt-datepicker-prev,.tbt-datepicker .tbt-datepicker-next{position:absolute;top:3px;width:1.8em;height:1.8em}.tbt-datepicker .tbt-datepicker-prev-hover,.tbt-datepicker .tbt-datepicker-next-hover{top:3px}.tbt-datepicker .tbt-datepicker-prev{left:2px}.tbt-datepicker .tbt-datepicker-next{right:2px}.tbt-datepicker .tbt-datepicker-prev-hover{left:1px}.tbt-datepicker .tbt-datepicker-next-hover{right:1px}.tbt-datepicker .tbt-datepicker-prev span,.tbt-datepicker .tbt-datepicker-next span{font-size:0;display:block;position:absolute;left:50%;margin-left:-8px;top:50%;margin-top:-8px}.tbt-datepicker .tbt-datepicker-title{margin:0 2.3em;line-height:1.8em;text-align:center}.tbt-datepicker .tbt-datepicker-title select{font-size:1em;margin:1px 0}.tbt-datepicker select.tbt-datepicker-month,.tbt-datepicker select.tbt-datepicker-year{width:45%}.tbt-datepicker table{width:100%;font-size:.9em;border-collapse:collapse;margin:0 0 .4em}.tbt-datepicker th{display: table-cell;padding:.7em .3em;text-align:center;font-weight:bold;border:0}.tbt-datepicker td:before{display: none;}.tbt-datepicker td{display: table-cell !important;padding: 1px !important;border: 0 !important;border:0;padding:1px}.tbt-datepicker td span,.tbt-datepicker td a{display:block;padding:.2em;text-align:right;text-decoration:none}.tbt-datepicker .tbt-datepicker-buttonpane{background-image:none;margin:.7em 0 0 0;padding:0 .2em;border-left:0;border-right:0;border-bottom:0}.tbt-datepicker .tbt-datepicker-buttonpane button{float:right;margin:.5em .2em .4em;cursor:pointer;padding:.2em .6em .3em .6em;width:auto;overflow:visible}.tbt-datepicker .tbt-datepicker-buttonpane button.tbt-datepicker-current{float:left}.tbt-datepicker.tbt-datepicker-multi{width:auto}.tbt-datepicker-multi .tbt-datepicker-group{float:left}.tbt-datepicker-multi .tbt-datepicker-group table{width:95%;margin:0 auto .4em}.tbt-datepicker-multi-2 .tbt-datepicker-group{width:100%}.tbt-datepicker-multi-3 .tbt-datepicker-group{width:33.3%}.tbt-datepicker-multi-4 .tbt-datepicker-group{width:25%}.tbt-datepicker-multi .tbt-datepicker-group-last .tbt-datepicker-header,.tbt-datepicker-multi .tbt-datepicker-group-middle .tbt-datepicker-header{border-left-width:0}.tbt-datepicker-multi .tbt-datepicker-buttonpane{clear:left}.tbt-datepicker-row-break{clear:both;width:100%;font-size:0}.tbt-datepicker-rtl{direction:rtl}.tbt-datepicker-rtl .tbt-datepicker-prev{right:2px;left:auto}.tbt-datepicker-rtl .tbt-datepicker-next{left:2px;right:auto}.tbt-datepicker-rtl .tbt-datepicker-prev:hover{right:1px;left:auto}.tbt-datepicker-rtl .tbt-datepicker-next:hover{left:1px;right:auto}.tbt-datepicker-rtl .tbt-datepicker-buttonpane{clear:right}.tbt-datepicker-rtl .tbt-datepicker-buttonpane button{float:left}.tbt-datepicker-rtl .tbt-datepicker-buttonpane button.tbt-datepicker-current,.tbt-datepicker-rtl .tbt-datepicker-group{float:right}.tbt-datepicker-rtl .tbt-datepicker-group-last .tbt-datepicker-header,.tbt-datepicker-rtl .tbt-datepicker-group-middle .tbt-datepicker-header{border-right-width:0;border-left-width:1px}.tbt-datepicker .tbt-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat;left:.5em;top:.3em}.tbt-widget{font-family:Arial,Helvetica,sans-serif;font-size:1em}.tbt-widget .tbt-widget{font-size:1em}.tbt-widget input,.tbt-widget select,.tbt-widget textarea,.tbt-widget button{font-family:Arial,Helvetica,sans-serif;font-size:1em}.tbt-widget.tbt-widget-content{max-width:100%;border:1px solid #c5c5c5}.tbt-widget-content{border:1px solid #ddd;background:#fff;color:#333}.tbt-widget-content a{color:#333}.tbt-widget-header{border:1px solid transparent;background:#e9e9e9;color:#fff;font-weight:bold}.tbt-widget-header a{color:#333}.tbt-state-default,.tbt-widget-content .tbt-state-default,.tbt-widget-header .tbt-state-default,.tbt-button,html .tbt-button.tbt-state-disabled:hover,html .tbt-button.tbt-state-disabled:active{border:1px solid #c5c5c5;background:#f6f6f6;font-weight:normal;color:#454545}.tbt-state-default a,.tbt-state-default a:link,.tbt-state-default a:visited,a.tbt-button,a:link.tbt-button,a:visited.tbt-button,.tbt-button{color:#454545;text-decoration:none}.tbt-state-hover,.tbt-widget-content .tbt-state-hover,.tbt-widget-header .tbt-state-hover,.tbt-state-focus,.tbt-widget-content .tbt-state-focus,.tbt-widget-header .tbt-state-focus,.tbt-button:hover,.tbt-button:focus{border:1px solid #ccc;background:#ededed;font-weight:normal;color:#2b2b2b}.tbt-state-hover a,.tbt-state-hover a:hover,.tbt-state-hover a:link,.tbt-state-hover a:visited,.tbt-state-focus a,.tbt-state-focus a:hover,.tbt-state-focus a:link,.tbt-state-focus a:visited,a.tbt-button:hover,a.tbt-button:focus{color:#2b2b2b;text-decoration:none}.tbt-visual-focus{box-shadow:0 0 3px 1px rgb(94,158,214)}.tbt-state-active,.tbt-widget-content .tbt-state-active,.tbt-widget-header .tbt-state-active,a.tbt-button:active,.tbt-button:active,.tbt-button.tbt-state-active:hover{border:1px solid #003eff;background:#007fff;font-weight:normal;color:#fff}.tbt-icon-background,.tbt-state-active .tbt-icon-background{border:#003eff;background-color:#fff}.tbt-state-active a,.tbt-state-active a:link,.tbt-state-active a:visited{color:#fff;text-decoration:none}.tbt-state-checked{border:1px solid #dad55e;background:#fffa90}.tbt-state-highlight a,.tbt-widget-content .tbt-state-highlight a,.tbt-widget-header .tbt-state-highlight a{color:#777620}.tbt-state-error,.tbt-widget-content .tbt-state-error,.tbt-widget-header .tbt-state-error{border:1px solid #f1a899;background:#fddfdf;color:#5f3f3f}.tbt-state-error a,.tbt-widget-content .tbt-state-error a,.tbt-widget-header .tbt-state-error a{color:#5f3f3f}.tbt-state-error-text,.tbt-widget-content .tbt-state-error-text,.tbt-widget-header .tbt-state-error-text{color:#5f3f3f}.tbt-priority-primary,.tbt-widget-content .tbt-priority-primary,.tbt-widget-header .tbt-priority-primary{font-weight:bold}.tbt-priority-secondary,.tbt-widget-content .tbt-priority-secondary,.tbt-widget-header .tbt-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.tbt-state-disabled,.tbt-widget-content .tbt-state-disabled,.tbt-widget-header .tbt-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.tbt-state-disabled .tbt-icon{filter:Alpha(Opacity=35)}.tbt-icon{width:16px;height:16px}.tbt-icon,.tbt-widget-content .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_ffffff_256x240.png")}.tbt-widget-header .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_ffffff_256x240.png")}.tbt-state-hover .tbt-icon,.tbt-state-focus .tbt-icon,.tbt-button:hover .tbt-icon,.tbt-button:focus .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_555555_256x240.png")}.tbt-state-active .tbt-icon,.tbt-button:active .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_ffffff_256x240.png")}.tbt-state-highlight .tbt-icon,.tbt-button .tbt-state-highlight.tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_777620_256x240.png")}.tbt-state-error .tbt-icon,.tbt-state-error-text .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_cc0000_256x240.png")}.tbt-button .tbt-icon{background-image:url("https://thanhhd.com/app/public/advanced-delivery/images/ui-icons_777777_256x240.png")}.tbt-icon-blank{background-position:16px 16px}.tbt-icon-caret-1-n{background-position:0 0}.tbt-icon-caret-1-ne{background-position:-16px 0}.tbt-icon-caret-1-e{background-position:-32px 0}.tbt-icon-caret-1-se{background-position:-48px 0}.tbt-icon-caret-1-s{background-position:-65px 0}.tbt-icon-caret-1-sw{background-position:-80px 0}.tbt-icon-caret-1-w{background-position:-96px 0}.tbt-icon-caret-1-nw{background-position:-112px 0}.tbt-icon-caret-2-n-s{background-position:-128px 0}.tbt-icon-caret-2-e-w{background-position:-144px 0}.tbt-icon-triangle-1-n{background-position:0 -16px}.tbt-icon-triangle-1-ne{background-position:-16px -16px}.tbt-icon-triangle-1-e{background-position:-32px -16px}.tbt-icon-triangle-1-se{background-position:-48px -16px}.tbt-icon-triangle-1-s{background-position:-65px -16px}.tbt-icon-triangle-1-sw{background-position:-80px -16px}.tbt-icon-triangle-1-w{background-position:-96px -16px}.tbt-icon-triangle-1-nw{background-position:-112px -16px}.tbt-icon-triangle-2-n-s{background-position:-128px -16px}.tbt-icon-triangle-2-e-w{background-position:-144px -16px}.tbt-icon-arrow-1-n{background-position:0 -32px}.tbt-icon-arrow-1-ne{background-position:-16px -32px}.tbt-icon-arrow-1-e{background-position:-32px -32px}.tbt-icon-arrow-1-se{background-position:-48px -32px}.tbt-icon-arrow-1-s{background-position:-65px -32px}.tbt-icon-arrow-1-sw{background-position:-80px -32px}.tbt-icon-arrow-1-w{background-position:-96px -32px}.tbt-icon-arrow-1-nw{background-position:-112px -32px}.tbt-icon-arrow-2-n-s{background-position:-128px -32px}.tbt-icon-arrow-2-ne-sw{background-position:-144px -32px}.tbt-icon-arrow-2-e-w{background-position:-160px -32px}.tbt-icon-arrow-2-se-nw{background-position:-176px -32px}.tbt-icon-arrowstop-1-n{background-position:-192px -32px}.tbt-icon-arrowstop-1-e{background-position:-208px -32px}.tbt-icon-arrowstop-1-s{background-position:-224px -32px}.tbt-icon-arrowstop-1-w{background-position:-240px -32px}.tbt-icon-arrowthick-1-n{background-position:1px -48px}.tbt-icon-arrowthick-1-ne{background-position:-16px -48px}.tbt-icon-arrowthick-1-e{background-position:-32px -48px}.tbt-icon-arrowthick-1-se{background-position:-48px -48px}.tbt-icon-arrowthick-1-s{background-position:-64px -48px}.tbt-icon-arrowthick-1-sw{background-position:-80px -48px}.tbt-icon-arrowthick-1-w{background-position:-96px -48px}.tbt-icon-arrowthick-1-nw{background-position:-112px -48px}.tbt-icon-arrowthick-2-n-s{background-position:-128px -48px}.tbt-icon-arrowthick-2-ne-sw{background-position:-144px -48px}.tbt-icon-arrowthick-2-e-w{background-position:-160px -48px}.tbt-icon-arrowthick-2-se-nw{background-position:-176px -48px}.tbt-icon-arrowthickstop-1-n{background-position:-192px -48px}.tbt-icon-arrowthickstop-1-e{background-position:-208px -48px}.tbt-icon-arrowthickstop-1-s{background-position:-224px -48px}.tbt-icon-arrowthickstop-1-w{background-position:-240px -48px}.tbt-icon-arrowreturnthick-1-w{background-position:0 -64px}.tbt-icon-arrowreturnthick-1-n{background-position:-16px -64px}.tbt-icon-arrowreturnthick-1-e{background-position:-32px -64px}.tbt-icon-arrowreturnthick-1-s{background-position:-48px -64px}.tbt-icon-arrowreturn-1-w{background-position:-64px -64px}.tbt-icon-arrowreturn-1-n{background-position:-80px -64px}.tbt-icon-arrowreturn-1-e{background-position:-96px -64px}.tbt-icon-arrowreturn-1-s{background-position:-112px -64px}.tbt-icon-arrowrefresh-1-w{background-position:-128px -64px}.tbt-icon-arrowrefresh-1-n{background-position:-144px -64px}.tbt-icon-arrowrefresh-1-e{background-position:-160px -64px}.tbt-icon-arrowrefresh-1-s{background-position:-176px -64px}.tbt-icon-arrow-4{background-position:0 -80px}.tbt-icon-arrow-4-diag{background-position:-16px -80px}.tbt-icon-extlink{background-position:-32px -80px}.tbt-icon-newwin{background-position:-48px -80px}.tbt-icon-refresh{background-position:-64px -80px}.tbt-icon-shuffle{background-position:-80px -80px}.tbt-icon-transfer-e-w{background-position:-96px -80px}.tbt-icon-transferthick-e-w{background-position:-112px -80px}.tbt-icon-folder-collapsed{background-position:0 -96px}.tbt-icon-folder-open{background-position:-16px -96px}.tbt-icon-document{background-position:-32px -96px}.tbt-icon-document-b{background-position:-48px -96px}.tbt-icon-note{background-position:-64px -96px}.tbt-icon-mail-closed{background-position:-80px -96px}.tbt-icon-mail-open{background-position:-96px -96px}.tbt-icon-suitcase{background-position:-112px -96px}.tbt-icon-comment{background-position:-128px -96px}.tbt-icon-person{background-position:-144px -96px}.tbt-icon-print{background-position:-160px -96px}.tbt-icon-trash{background-position:-176px -96px}.tbt-icon-locked{background-position:-192px -96px}.tbt-icon-unlocked{background-position:-208px -96px}.tbt-icon-bookmark{background-position:-224px -96px}.tbt-icon-tag{background-position:-240px -96px}.tbt-icon-home{background-position:0 -112px}.tbt-icon-flag{background-position:-16px -112px}.tbt-icon-calendar{background-position:-32px -112px}.tbt-icon-cart{background-position:-48px -112px}.tbt-icon-pencil{background-position:-64px -112px}.tbt-icon-clock{background-position:-80px -112px}.tbt-icon-disk{background-position:-96px -112px}.tbt-icon-calculator{background-position:-112px -112px}.tbt-icon-zoomin{background-position:-128px -112px}.tbt-icon-zoomout{background-position:-144px -112px}.tbt-icon-search{background-position:-160px -112px}.tbt-icon-wrench{background-position:-176px -112px}.tbt-icon-gear{background-position:-192px -112px}.tbt-icon-heart{background-position:-208px -112px}.tbt-icon-star{background-position:-224px -112px}.tbt-icon-link{background-position:-240px -112px}.tbt-icon-cancel{background-position:0 -128px}.tbt-icon-plus{background-position:-16px -128px}.tbt-icon-plusthick{background-position:-32px -128px}.tbt-icon-minus{background-position:-48px -128px}.tbt-icon-minusthick{background-position:-64px -128px}.tbt-icon-close{background-position:-80px -128px}.tbt-icon-closethick{background-position:-96px -128px}.tbt-icon-key{background-position:-112px -128px}.tbt-icon-lightbulb{background-position:-128px -128px}.tbt-icon-scissors{background-position:-144px -128px}.tbt-icon-clipboard{background-position:-160px -128px}.tbt-icon-copy{background-position:-176px -128px}.tbt-icon-contact{background-position:-192px -128px}.tbt-icon-image{background-position:-208px -128px}.tbt-icon-video{background-position:-224px -128px}.tbt-icon-script{background-position:-240px -128px}.tbt-icon-alert{background-position:0 -144px}.tbt-icon-info{background-position:-16px -144px}.tbt-icon-notice{background-position:-32px -144px}.tbt-icon-help{background-position:-48px -144px}.tbt-icon-check{background-position:-64px -144px}.tbt-icon-bullet{background-position:-80px -144px}.tbt-icon-radio-on{background-position:-96px -144px}.tbt-icon-radio-off{background-position:-112px -144px}.tbt-icon-pin-w{background-position:-128px -144px}.tbt-icon-pin-s{background-position:-144px -144px}.tbt-icon-play{background-position:0 -160px}.tbt-icon-pause{background-position:-16px -160px}.tbt-icon-seek-next{background-position:-32px -160px}.tbt-icon-seek-prev{background-position:-48px -160px}.tbt-icon-seek-end{background-position:-64px -160px}.tbt-icon-seek-start{background-position:-80px -160px}.tbt-icon-seek-first{background-position:-80px -160px}.tbt-icon-stop{background-position:-96px -160px}.tbt-icon-eject{background-position:-112px -160px}.tbt-icon-volume-off{background-position:-128px -160px}.tbt-icon-volume-on{background-position:-144px -160px}.tbt-icon-power{background-position:0 -176px}.tbt-icon-signal-diag{background-position:-16px -176px}.tbt-icon-signal{background-position:-32px -176px}.tbt-icon-battery-0{background-position:-48px -176px}.tbt-icon-battery-1{background-position:-64px -176px}.tbt-icon-battery-2{background-position:-80px -176px}.tbt-icon-battery-3{background-position:-96px -176px}.tbt-icon-circle-plus{background-position:0 -192px}.tbt-icon-circle-minus{background-position:-16px -192px}.tbt-icon-circle-close{background-position:-32px -192px}.tbt-icon-circle-triangle-e{background-position:-48px -192px}.tbt-icon-circle-triangle-s{background-position:-64px -192px}.tbt-icon-circle-triangle-w{background-position:-80px -192px}.tbt-icon-circle-triangle-n{background-position:-96px -192px}.tbt-icon-circle-arrow-e{background-position:-112px -192px}.tbt-icon-circle-arrow-s{background-position:-128px -192px}.tbt-icon-circle-arrow-w{background-position:-144px -192px}.tbt-icon-circle-arrow-n{background-position:-160px -192px}.tbt-icon-circle-zoomin{background-position:-176px -192px}.tbt-icon-circle-zoomout{background-position:-192px -192px}.tbt-icon-circle-check{background-position:-208px -192px}.tbt-icon-circlesmall-plus{background-position:0 -208px}.tbt-icon-circlesmall-minus{background-position:-16px -208px}.tbt-icon-circlesmall-close{background-position:-32px -208px}.tbt-icon-squaresmall-plus{background-position:-48px -208px}.tbt-icon-squaresmall-minus{background-position:-64px -208px}.tbt-icon-squaresmall-close{background-position:-80px -208px}.tbt-icon-grip-dotted-vertical{background-position:0 -224px}.tbt-icon-grip-dotted-horizontal{background-position:-16px -224px}.tbt-icon-grip-solid-vertical{background-position:-32px -224px}.tbt-icon-grip-solid-horizontal{background-position:-48px -224px}.tbt-icon-gripsmall-diagonal-se{background-position:-64px -224px}.tbt-icon-grip-diagonal-se{background-position:-80px -224px}.tbt-corner-all,.tbt-corner-top,.tbt-corner-left,.tbt-corner-tl{border-top-left-radius:0px}.tbt-corner-all,.tbt-corner-top,.tbt-corner-right,.tbt-corner-tr{border-top-right-radius:0px}.tbt-corner-all,.tbt-corner-bottom,.tbt-corner-left,.tbt-corner-bl{border-bottom-left-radius:0px}.tbt-corner-all,.tbt-corner-bottom,.tbt-corner-right,.tbt-corner-br{border-bottom-right-radius:0px}.tbt-widget-overlay{background:#aaa;opacity:.3;filter:Alpha(Opacity=30)}.tbt-widget-shadow{-webkit-box-shadow:0 0 5px #666;box-shadow:0 0 5px #666}.tbt-state-hover,.tbt-widget-content .tbt-state-hover,.tbt-widget-header .tbt-state-hover{cursor:pointer;border-radius:0}.tbtDeliveryCalendar>div{margin: auto;margin-top: 20px;}.tbt-datepicker-calendar tr:first-child th:after, .tbt-datepicker-calendar tr:first-child td:after{border:none}';jQuery("body").append("<style>"+tbtTableStyle+"</style>"),"Delivery Date"!=result.delivery_date_title&&jQuery(".tbtDeliveryDateVal").attr("name","properties["+result.delivery_date_title+"]"),"Delivery Day"!=result.delivery_day_title&&jQuery(".tbtDeliveryDayVal").attr("name","properties["+result.delivery_day_title+"]");var startWeek=parseInt(result.week_start),customCss=result.custom_css,date_format="mm/dd/yy";date_format="1"==result.date_format?"mm/dd/yy":"dd/mm/yy",jQuery("[name='properties[Delivery Time]'], .deliveryTime, .deliveryRequired, .tbtHeading").remove();var customStyle=".tbt-widget-header{background: "+result.header_color+";border-color: "+result.border_color+";}.tbt-state-active, .tbt-widget-content .tbt-state-active, .tbt-widget-header .tbt-state-active, a.tbt-button:active, .tbt-button:active, .tbt-button.tbt-state-active:hover {border: 1px solid "+result.day_selected_color+";background: "+result.day_selected_color+";";if(customCss&&jQuery("body").append("<style>"+customStyle+"</style>"),"pro"==result.account_type&&"1"==result.enable_add_field&&result.addition_fields.length){jQuery(".deliveryAdditionField").remove(),jQuery(".tbtDeliveryCalendar").tbtDatepicker("destroy");for(var deliveryAdditionFields="<option>"+result.add_field_title+"</option>",deliveryAdditionField=result.addition_fields,i=0;i<deliveryAdditionField.length;i++){var temp='<option value="'+deliveryAdditionField[i].id+'">'+deliveryAdditionField[i].field_title+"</option>";deliveryAdditionFields+=temp}if(jQuery(".tbtDeliveryCalendar").before("<select class='deliveryAdditionField'>"+deliveryAdditionFields+"</select>"),"1"==result.required){var requiredText=result.require_text;jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').off("click").on("click",function(t){doRequired1(t,result,requiredText,cartForm)}),jQuery(".additional-checkout-button, .additional-checkout-button img").length&&jQuery(".additional-checkout-button, .additional-checkout-button img").off("click").on("click",function(t){doRequired1(t,result,requiredText,cartForm)}),cartForm.find("[name='checkout']").length?cartForm.find("[name='checkout']").off("click").on("click",function(t){doRequired1(t,result,requiredText,cartForm)}):cartForm.submit(function(t){doRequired1(t,result,requiredText,cartForm)})}jQuery(".deliveryAdditionField").on("change",function(){jQuery(".tbtDeliveryTimeVal, .tbtHeading, .deliveryTime").remove(),jQuery(".tbtDeliveryDayVal, .tbtDeliveryDateVal").val("");var that=this;if(jQuery(that).val()!=result.add_field_title)for(var fieldId=jQuery(that).val(),i=0;i<result.addition_fields.length;i++){var field=result.addition_fields[i];if(field.id==fieldId){var minDate=field.min_date;if("undefined"!=typeof deliverProduct){var checkMinDate=-999;deliverProduct.tags.forEach(function(t){var e=t;e.indexOf("deliveryMinDate")>-1&&e.split(",").forEach(function(t){t.indexOf("deliveryMinDate")>-1&&("max"==result.sorting?parseInt(t.replace("deliveryMinDate",""))>checkMinDate&&(checkMinDate=parseInt(t.replace("deliveryMinDate",""))):checkMinDate>parseInt(t.replace("deliveryMinDate",""))&&(checkMinDate=parseInt(t.replace("deliveryMinDate",""))))})}),-999!=checkMinDate&&(minDate=checkMinDate)}else var minDate=parseInt(field.min_date);if(parseInt(field.use_hour)){var today=(new Date).getHours();today>=parseInt(field.hour)&&(minDate+=parseInt(field.day))}var inValidDay=field.invalid_day.split(",");if(inValidDay)for(var i=0;i<inValidDay.length;i++)inValidDay[i]=parseInt(inValidDay[i]);else inValidDay=[];if(field.extra_no_available)var extraNoAvailable=field.extra_no_available.split(",");else var extraNoAvailable=!1;if("1"==result.required&&result.require_text&&(jQuery(".deliveryRequired").remove(),jQuery("<div class='deliveryRequired'></div>").insertBefore(".deliveryAdditionField")),minDate<0&&"pro"==result.account_type);else{if(result.heading&&jQuery("<div class='tbtHeading'>"+result.heading+"</div>").insertBefore(".deliveryAdditionField"),"1"==result.required){var requiredText=result.require_text;jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),jQuery(".additional-checkout-button").length&&jQuery(".additional-checkout-button").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),cartForm.find("[name='checkout']").length?cartForm.find("[name='checkout']").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}):cartForm.off("submit").on("submit",function(t){doRequired(t,result,requiredText,cartForm)})}if("1"==field.use_time&&field.delivery_time){cartForm.append('<input type="hidden" name="properties[Delivery Time]" class="tbtDeliveryTimeVal">');for(var deliveryTimes="<option>"+field.select_time_text+"</option>",delivery_time=field.delivery_time.split(","),i=0;i<delivery_time.length;i++){var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}jQuery(".tbtDeliveryCalendar").after("<select class='deliveryTime'>"+deliveryTimes+"</select>"),jQuery(".deliveryTime").off("change").on("change",function(){jQuery(this).val()==field.select_time_text?jQuery(".tbtDeliveryTimeVal").val(""):jQuery(".tbtDeliveryTimeVal").val(jQuery(this).val())})}var maxDate=!1;result.specific_min_date&&(minDate=eval(result.specific_min_date)),result.specific_max_date&&(maxDate=eval(result.specific_max_date)),bindDatePicker(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result)}break}}})}else{minDate=parseInt(result.min_date);var productMinDates=[];if("undefined"!=typeof deliverProduct&&deliverProduct.tags.length&&deliverProduct.tags.forEach(function(t){var e=t;e.indexOf("deliveryMinDate")>-1&&productMinDates.push(parseInt(e.replace("deliveryMinDate","")))}),productMinDates.length&&(minDate=getBigNumber(productMinDates)),parseInt(result.use_hour)&&minDate>-1){var today=(new Date).getHours();today>=parseInt(result.hour)&&(minDate+=parseInt(result.day))}var inValidDay=result.invalid_day.split(",");if(inValidDay)for(var i=0;i<inValidDay.length;i++)inValidDay[i]=parseInt(inValidDay[i]);else inValidDay=[];if(result.extra_no_available)var extraNoAvailable=result.extra_no_available.split(",");else var extraNoAvailable=!1;if("1"==result.required&&result.require_text&&jQuery("<div class='deliveryRequired'></div>").insertBefore(".tbtDeliveryCalendar"),minDate<0);else{if(result.heading&&jQuery("<div class='tbtHeading'>"+result.heading+"</div>").insertBefore(".tbtDeliveryCalendar"),"1"==result.required){var requiredText=result.require_text;jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),jQuery(".additional-checkout-button").length&&jQuery(".additional-checkout-button").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}),cartForm.find("[name='checkout']").length?cartForm.find("[name='checkout']").off("click").on("click",function(t){doRequired(t,result,requiredText,cartForm)}):cartForm.off("submit").on("submit",function(t){doRequired(t,result,requiredText,cartForm)})}if("1"==result.use_time&&result.delivery_time){cartForm.append('<input type="hidden" name="properties[Delivery Time]" class="tbtDeliveryTimeVal">');for(var deliveryTimes="<option>"+result.select_time_text+"</option>",delivery_time=result.delivery_time.split(","),i=0;i<delivery_time.length;i++){var d=new Date,n=d.getHours(),todayDate=d.getDate()+"/"+d.getMonth()+"/"+d.getFullYear();if("Pick Up today - last order 4pm"==delivery_time[i]&&"utopia-products-asia-upa.myshopify.com"==shopName){if(n<16&&"25/11/2017"!=todayDate&&"1/0/18 "!=todayDate){var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}}else if("Pick Up tomorrow"==delivery_time[i]&&"utopia-products-asia-upa.myshopify.com"==shopName){if("24/11/2017"!=todayDate&&"31/11/18 "!=todayDate){var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}}else{var temp='<option value="'+delivery_time[i]+'">'+delivery_time[i]+"</option>";deliveryTimes+=temp}}jQuery(".tbtDeliveryCalendar").after("<select class='deliveryTime'>"+deliveryTimes+"</select>"),jQuery(".deliveryTime").change(function(){if(jQuery(this).val()==result.select_time_text?jQuery(".tbtDeliveryTimeVal").val(""):jQuery(".tbtDeliveryTimeVal").val(jQuery(this).val()),"utopia-products-asia-upa.myshopify.com"==shopName)if(extraNoAvailable=result.extra_no_available.split(","),jQuery(".customDiscount").remove(),jQuery(".deliveryTime").val().indexOf("Pick Up")>-1&&cartForm.append('<input type="hidden" name="discount" class="customDiscount" value="PICKUP10">'),"Pick Up today - last order 4pm"==jQuery(".deliveryTime").val())jQuery(".tbtDeliveryCalendar").hide(),jQuery(".tbtDeliveryDateVal").val("Today"),jQuery(".tbtDeliveryDayVal").val("Pickup"),jQuery(".deliveryRequired").hide();else if("Pick Up tomorrow"==jQuery(".deliveryTime").val()){var t=new Date,e=new Date(t.getTime()+864e5);jQuery(".tbtDeliveryCalendar").tbtDatepicker("option","minDate",0),jQuery(".tbtDeliveryCalendar").tbtDatepicker("setDate",e);var i=jQuery(".tbtDeliveryCalendar").val();jQuery(".tbtDeliveryCalendar").hide(),jQuery(".tbtDeliveryDateVal").val(i),jQuery(".tbtDeliveryDayVal").val("Pickup"),jQuery(".deliveryRequired").hide()}else if("Pick Up - choose a date"==jQuery(".deliveryTime").val()){jQuery(".tbt-state-default").removeClass("tbt-state-active"),jQuery(".tbtDeliveryDateVal").val(""),jQuery(".tbtDeliveryDayVal").val(""),jQuery(".tbtDeliveryCalendar").show(),extraNoAvailable.push("25/12/2017"),extraNoAvailable.push("01/01/2018");var a=extraNoAvailable.indexOf("02/01/2018");extraNoAvailable.splice(a,1);a=extraNoAvailable.indexOf("28/12/2017");extraNoAvailable.splice(a,1),bindDatePickerAllAvailable(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result)}else"Delivery - choose a date"==jQuery(".deliveryTime").val()&&(jQuery(".tbt-state-default").removeClass("tbt-state-active"),jQuery(".tbtDeliveryDateVal").val(""),jQuery(".tbtDeliveryDayVal").val(""),jQuery(".tbtDeliveryCalendar").show(),bindDatePicker(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result))})}var maxDate=!1;result.specific_min_date&&(minDate=eval(result.specific_min_date)),result.specific_max_date&&(maxDate=eval(result.specific_max_date)),bindDatePicker(minDate,inValidDay,startWeek,date_format,result.months_name,result.dates_name,extraNoAvailable,maxDate,result)}}}})}}if(cart)if("undefined"==typeof jQuery){var headTag=document.getElementsByTagName("head")[0],jqTag=document.createElement("script");jqTag.type="text/javascript",jqTag.src="//code.jquery.com/jquery-2.2.4.min.js",jqTag.onload=myJQueryCode,headTag.appendChild(jqTag)}else myJQueryCode();else if(isProduct)if("undefined"==typeof jQuery){var headTag=document.getElementsByTagName("head")[0],jqTag=document.createElement("script");jqTag.type="text/javascript",jqTag.src="//code.jquery.com/jquery-2.2.4.min.js",jqTag.onload=myJQueryCode1,headTag.appendChild(jqTag)}else myJQueryCode1();function getBigNumber(t){for(var e=t[0],i=0;i<t.length;i++)t[i]>e&&(e=t[i]);return e}function bindDatePickerAllAvailable(t,e,i,a,r,o,n,d,c){if("1"==c.use_multi_month)var s=parseInt(c.multi_month);else s=1;var l=[0];jQuery(".tbtDeliveryCalendar").tbtDatepicker("destroy").tbtDatepicker({beforeShowDay:function(t){var e=t.getDay();if(l.indexOf(e)>-1)return[!1,"","Booked out"];if(n){var i=$.tbtDatepicker.formatDate(a,t);return[-1==n.indexOf(i)]}},onSelect:function(t){jQuery(".tbtDeliveryDateVal").val(t),jQuery(".tbtDeliveryDayVal").val(toTheDay())},minDate:t,firstDay:i,dateFormat:a,dayNamesMin:o.split(","),monthNames:r.split(","),numberOfMonths:s})}function bindDatePicker(t,e,i,a,r,o,n,d,c){if("1"==c.use_multi_month)var s=parseInt(c.multi_month);else s=1;d?jQuery(".tbtDeliveryCalendar").tbtDatepicker("destroy").tbtDatepicker({beforeShowDay:function(t){var i=t.getDay();if(e.indexOf(i)>-1)return[!1,"","Booked out"];if(n){var r=$.tbtDatepicker.formatDate(a,t);return[-1==n.indexOf(r)]}return[!0,"","available"]},onSelect:function(t){jQuery(".tbtDeliveryDateVal").val(t),jQuery(".tbtDeliveryDayVal").val(toTheDay())},minDate:t,maxDate:d,firstDay:i,dateFormat:a,dayNamesMin:o.split(","),monthNames:r.split(","),numberOfMonths:s}):jQuery(".tbtDeliveryCalendar").tbtDatepicker("destroy").tbtDatepicker({beforeShowDay:function(t){var i=t.getDay();if(e.indexOf(i)>-1)return[!1,"","Booked out"];if(n){var r=$.tbtDatepicker.formatDate(a,t);return[-1==n.indexOf(r)]}return[!0,"","available"]},onSelect:function(t){jQuery(".tbtDeliveryDateVal").val(t),jQuery(".tbtDeliveryDayVal").val(toTheDay())},minDate:t,firstDay:i,dateFormat:a,dayNamesMin:o.split(","),monthNames:r.split(","),numberOfMonths:s}),jQuery(".tbtDeliveryCalendar").tbtDatepicker("setDate",null),jQuery(".tbtDeliveryCalendar").find(".tbt-datepicker-current-day a").removeClass("tbt-state-active").removeClass("tbt-state-hover"),jQuery(".tbtDeliveryCalendar").find(".tbt-datepicker-current-day").removeClass("tbt-datepicker-current-day").removeClass("tbt-datepicker-days-cell-over")}function doRequired(t,e,i,a){jQuery(".deliveryRequired").hide(),"1"==e.use_time?jQuery(".tbtDeliveryDateVal").val()&&jQuery(".tbtDeliveryTimeVal").val()?"pro"==e.account_type&&"1"==e.enable_add_field&&e.addition_fields.length&&"1"==e.require_add_field?jQuery(".deliveryAdditionField").val()==e.add_field_title?(jQuery(".deliveryAdditionField").addClass("tbtRequired"),jQuery("html, body").animate({scrollTop:jQuery(".deliveryAdditionField").offset().top-100},1e3),t.preventDefault()):jQuery(".deliveryAdditionField").removeClass("tbtRequired"):(jQuery(".deliveryTime").removeClass("tbtRequired"),jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"),jQuery(".deliveryRequired").hide(),a.unbind("submit"),a.find("[name='checkout']").length?(a.find("[name='checkout']").unbind("click"),a.find("[name='checkout']").click()):location.href="/checkout"):"pro"==e.account_type&&"1"==e.enable_add_field&&e.addition_fields.length&&"1"==e.require_add_field?(jQuery(".deliveryAdditionField").val()==e.add_field_title?jQuery(".deliveryAdditionField").addClass("tbtRequired"):jQuery(".deliveryAdditionField").removeClass("tbtRequired"),jQuery("html, body").animate({scrollTop:jQuery(".deliveryAdditionField").offset().top-100},1e3),jQuery(".deliveryRequired").html(i).show(),jQuery(".tbtDeliveryDateVal").val()?jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"):jQuery(".tbtDeliveryCalendar").addClass("tbtRequired"),jQuery(".tbtDeliveryTimeVal").val()?jQuery(".deliveryTime").removeClass("tbtRequired"):jQuery(".deliveryTime").addClass("tbtRequired"),setTimeout(function(){a.find("[name='checkout']").removeClass("btn--loading")},0),t.preventDefault()):(jQuery("html, body").animate({scrollTop:jQuery(".tbtDeliveryCalendar").offset().top-100},1e3),jQuery(".deliveryRequired").html(i).show(),jQuery(".tbtDeliveryDateVal").val()?jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"):jQuery(".tbtDeliveryCalendar").addClass("tbtRequired"),jQuery(".tbtDeliveryTimeVal").val()?jQuery(".deliveryTime").removeClass("tbtRequired"):jQuery(".deliveryTime").addClass("tbtRequired"),setTimeout(function(){a.find("[name='checkout']").removeClass("btn--loading")},0),t.preventDefault()):jQuery(".tbtDeliveryDateVal").val()?"pro"==e.account_type&&"1"==e.enable_add_field&&e.addition_fields.length&&"1"==e.require_add_field?jQuery(".deliveryAdditionField").val()==e.add_field_title?(jQuery(".deliveryAdditionField").addClass("tbtRequired"),jQuery("html, body").animate({scrollTop:jQuery(".deliveryAdditionField").offset().top-100},1e3),jQuery(".deliveryRequired").html(i).show(),jQuery(".deliveryAdditionField").val()==e.add_field_title?jQuery(".deliveryAdditionField").addClass("tbtRequired"):jQuery(".deliveryAdditionField").removeClass("tbtRequired"),t.preventDefault()):(jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"),jQuery(".deliveryRequired").hide(),a.unbind("submit"),jQuery('a[href="/checkout"]').length&&jQuery('a[href="/checkout"]').unbind("click"),a.find("[name='checkout']").length?(a.find("[name='checkout']").unbind("click"),a.find("[name='checkout']").click()):location.href="/checkout"):(jQuery(".deliveryTime").removeClass("tbtRequired"),jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"),jQuery(".deliveryRequired").hide(),a.unbind("submit"),location.href="/checkout"):"pro"==e.account_type&&"1"==e.enable_add_field&&e.addition_fields.length&&"1"==e.require_add_field?(jQuery("html, body").animate({scrollTop:jQuery(".deliveryAdditionField").offset().top-100},1e3),jQuery(".deliveryRequired").html(i).show(),jQuery(".deliveryAdditionField").val()==e.add_field_title?jQuery(".deliveryAdditionField").addClass("tbtRequired"):jQuery(".deliveryAdditionField").removeClass("tbtRequired"),jQuery(".tbtDeliveryDateVal").val()?jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"):jQuery(".tbtDeliveryCalendar").addClass("tbtRequired"),setTimeout(function(){a.find("[name='checkout']").removeClass("btn--loading")},0),t.preventDefault()):(jQuery("html, body").animate({scrollTop:jQuery(".tbtDeliveryCalendar").offset().top-100},1e3),jQuery(".deliveryRequired").html(i).show(),jQuery(".tbtDeliveryDateVal").val()?jQuery(".tbtDeliveryCalendar").removeClass("tbtRequired"):jQuery(".tbtDeliveryCalendar").addClass("tbtRequired"),setTimeout(function(){a.find("[name='checkout']").removeClass("btn--loading")},0),t.preventDefault())}function doRequired1(t,e,i,a){jQuery("html, body").animate({scrollTop:jQuery(".deliveryAdditionField").offset().top-100},1e3),jQuery(".deliveryRequired").html(i).show(),jQuery(".deliveryAdditionField").val()==e.add_field_title?jQuery(".deliveryAdditionField").addClass("tbtRequired"):jQuery(".deliveryAdditionField").removeClass("tbtRequired"),setTimeout(function(){a.find("[name='checkout']").removeClass("btn--loading")},0),t.preventDefault()}function initDelivery(){var t;t=function(t){function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="tbt-datepicker-div",this._inlineClass="tbt-datepicker-inline",this._appendClass="tbt-datepicker-append",this._triggerClass="tbt-datepicker-trigger",this._dialogClass="tbt-datepicker-dialog",this._disableClass="tbt-datepicker-disabled",this._unselectableClass="tbt-datepicker-unselectable",this._currentClass="tbt-datepicker-current-day",this._dayOverClass="tbt-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='tbt-datepicker tbt-widget tbt-widget-content tbt-helper-clearfix tbt-corner-all'></div>"))}function i(e){var i="button, .tbt-datepicker-prev, .tbt-datepicker-next, .tbt-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("tbt-state-hover"),-1!==this.className.indexOf("tbt-datepicker-prev")&&t(this).removeClass("tbt-datepicker-prev-hover"),-1!==this.className.indexOf("tbt-datepicker-next")&&t(this).removeClass("tbt-datepicker-next-hover")}).on("mouseover",i,a)}function a(){t.tbtDatepicker._isDisabledDatepicker(o.inline?o.dpDiv.parent()[0]:o.input[0])||(t(this).parents(".tbt-datepicker-calendar").find("a").removeClass("tbt-state-hover"),t(this).addClass("tbt-state-hover"),-1!==this.className.indexOf("tbt-datepicker-prev")&&t(this).addClass("tbt-datepicker-prev-hover"),-1!==this.className.indexOf("tbt-datepicker-next")&&t(this).addClass("tbt-datepicker-next-hover"))}function r(e,i){for(var a in t.extend(e,i),i)null==i[a]&&(e[a]=i[a]);return e}var o;t.ui=t.ui||{},t.ui.version="1.12.1",t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.extend(t.ui,{tbtDatepicker:{version:"1.12.1"}}),t.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return r(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var a,r,o;r="div"===(a=e.nodeName.toLowerCase())||"span"===a,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(o=this._newInst(t(e),r)).settings=t.extend({},i||{}),"input"===a?this._connectDatepicker(e,o):r&&this._inlineDatepicker(e,o)},_newInst:function(e,a){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?i(t("<div class='"+this._inlineClass+" tbt-datepicker tbt-widget tbt-widget-content tbt-helper-clearfix tbt-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var a=t(e);i.append=t([]),i.trigger=t([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var a,r,o,n=this._get(i,"appendText"),d=this._get(i,"isRTL");i.append&&i.append.remove(),n&&(i.append=t("<span class='"+this._appendClass+"'>"+n+"</span>"),e[d?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),("focus"===(a=this._get(i,"showOn"))||"both"===a)&&e.on("focus",this._showDatepicker),("button"===a||"both"===a)&&(r=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:r,title:r}):r)),e[d?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.tbtDatepicker._datepickerShowing&&t.tbtDatepicker._lastInput===e[0]?t.tbtDatepicker._hideDatepicker():t.tbtDatepicker._datepickerShowing&&t.tbtDatepicker._lastInput!==e[0]?(t.tbtDatepicker._hideDatepicker(),t.tbtDatepicker._showDatepicker(e[0])):t.tbtDatepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,a,r,o=new Date(2009,11,20),n=this._get(t,"dateFormat");n.match(/[DM]/)&&(e=function(t){for(i=0,a=0,r=0;t.length>r;r++)t[r].length>i&&(i=t[r].length,a=r);return a},o.setMonth(e(this._get(t,n.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var a=t(e);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,a,o,n){var d,c,s,l,p,b=this._dialogInst;return b||(this.uuid+=1,d="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+d+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(b=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",b)),r(b.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(b,i):i,this._dialogInput.val(i),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(c=document.documentElement.clientWidth,s=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,p=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+l,s/2-150+p]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),b.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",b),this},_destroyDatepicker:function(e){var i,a=t(e),r=t.data(e,"datepicker");a.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(r.append.remove(),r.trigger.remove(),a.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty(),o===r&&(o=null))},_enableDatepicker:function(e){var i,a,r=t(e),o=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&((a=r.children("."+this._inlineClass)).children().removeClass("tbt-state-disabled"),a.find("select.tbt-datepicker-month, select.tbt-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,a,r=t(e),o=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&((a=r.children("."+this._inlineClass)).children().addClass("tbt-state-disabled"),a.find("select.tbt-datepicker-month, select.tbt-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,a){var o,n,d,c,s=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.tbtDatepicker._defaults):s?"all"===i?t.extend({},s.settings):this._get(s,i):null:(o=i||{},"string"==typeof i&&((o={})[i]=a),void(s&&(this._curInst===s&&this._hideDatepicker(),n=this._getDateDatepicker(e,!0),d=this._getMinMaxDate(s,"min"),c=this._getMinMaxDate(s,"max"),r(s.settings,o),null!==d&&void 0!==o.dateFormat&&void 0===o.minDate&&(s.settings.minDate=this._formatDate(s,d)),null!==c&&void 0!==o.dateFormat&&void 0===o.maxDate&&(s.settings.maxDate=this._formatDate(s,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),s),this._autoSize(s),this._setDate(s,n),this._updateAlternate(s),this._updateDatepicker(s))))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,a,r,o=t.tbtDatepicker._getInst(e.target),n=!0,d=o.dpDiv.is(".tbt-datepicker-rtl");if(o._keyEvent=!0,t.tbtDatepicker._datepickerShowing)switch(e.keyCode){case 9:t.tbtDatepicker._hideDatepicker(),n=!1;break;case 13:return(r=t("td."+t.tbtDatepicker._dayOverClass+":not(."+t.tbtDatepicker._currentClass+")",o.dpDiv))[0]&&t.tbtDatepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,r[0]),(i=t.tbtDatepicker._get(o,"onSelect"))?(a=t.tbtDatepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[a,o])):t.tbtDatepicker._hideDatepicker(),!1;case 27:t.tbtDatepicker._hideDatepicker();break;case 33:t.tbtDatepicker._adjustDate(e.target,e.ctrlKey?-t.tbtDatepicker._get(o,"stepBigMonths"):-t.tbtDatepicker._get(o,"stepMonths"),"M");break;case 34:t.tbtDatepicker._adjustDate(e.target,e.ctrlKey?+t.tbtDatepicker._get(o,"stepBigMonths"):+t.tbtDatepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.tbtDatepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.tbtDatepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.tbtDatepicker._adjustDate(e.target,d?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.tbtDatepicker._adjustDate(e.target,e.ctrlKey?-t.tbtDatepicker._get(o,"stepBigMonths"):-t.tbtDatepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.tbtDatepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.tbtDatepicker._adjustDate(e.target,d?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.tbtDatepicker._adjustDate(e.target,e.ctrlKey?+t.tbtDatepicker._get(o,"stepBigMonths"):+t.tbtDatepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.tbtDatepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36===e.keyCode&&e.ctrlKey?t.tbtDatepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,a,r=t.tbtDatepicker._getInst(e.target);return t.tbtDatepicker._get(r,"constrainInput")?(i=t.tbtDatepicker._possibleChars(t.tbtDatepicker._get(r,"dateFormat")),a=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">a||!i||i.indexOf(a)>-1):void 0},_doKeyUp:function(e){var i=t.tbtDatepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.tbtDatepicker.parseDate(t.tbtDatepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.tbtDatepicker._getFormatConfig(i))&&(t.tbtDatepicker._setDateFromField(i),t.tbtDatepicker._updateAlternate(i),t.tbtDatepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){var i,a,o,n,d,c,s;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.tbtDatepicker._isDisabledDatepicker(e)||t.tbtDatepicker._lastInput===e||(i=t.tbtDatepicker._getInst(e),t.tbtDatepicker._curInst&&t.tbtDatepicker._curInst!==i&&(t.tbtDatepicker._curInst.dpDiv.stop(!0,!0),i&&t.tbtDatepicker._datepickerShowing&&t.tbtDatepicker._hideDatepicker(t.tbtDatepicker._curInst.input[0])),!1!==(o=(a=t.tbtDatepicker._get(i,"beforeShow"))?a.apply(e,[e,i]):{})&&(r(i.settings,o),i.lastVal=null,t.tbtDatepicker._lastInput=e,t.tbtDatepicker._setDateFromField(i),t.tbtDatepicker._inDialog&&(e.value=""),t.tbtDatepicker._pos||(t.tbtDatepicker._pos=t.tbtDatepicker._findPos(e),t.tbtDatepicker._pos[1]+=e.offsetHeight),n=!1,t(e).parents().each(function(){return!(n|="fixed"===t(this).css("position"))}),d={left:t.tbtDatepicker._pos[0],top:t.tbtDatepicker._pos[1]},t.tbtDatepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.tbtDatepicker._updateDatepicker(i),d=t.tbtDatepicker._checkOffset(i,d,n),i.dpDiv.css({position:t.tbtDatepicker._inDialog&&t.blockUI?"static":n?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"}),i.inline||(c=t.tbtDatepicker._get(i,"showAnim"),s=t.tbtDatepicker._get(i,"duration"),i.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.tbtDatepicker._datepickerShowing=!0,t.effects&&t.effects.effect[c]?i.dpDiv.show(c,t.tbtDatepicker._get(i,"showOptions"),s):i.dpDiv[c||"show"](c?s:null),t.tbtDatepicker._shouldFocusInput(i)&&i.input.trigger("focus"),t.tbtDatepicker._curInst=i)))},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,r=this._getNumberOfMonths(e),n=r[1],d=e.dpDiv.find("."+this._dayOverClass+" a");d.length>0&&a.apply(d.get(0)),e.dpDiv.removeClass("tbt-datepicker-multi-2 tbt-datepicker-multi-3 tbt-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("tbt-datepicker-multi-"+n).css("width",17*n+"em"),e.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("tbt-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("tbt-datepicker-rtl"),e===t.tbtDatepicker._curInst&&t.tbtDatepicker._datepickerShowing&&t.tbtDatepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.tbt-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,a){var r=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),n=e.input?e.input.outerWidth():0,d=e.input?e.input.outerHeight():0,c=document.documentElement.clientWidth+(a?0:t(document).scrollLeft()),s=document.documentElement.clientHeight+(a?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?r-n:0,i.left-=a&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=a&&i.top===e.input.offset().top+d?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>c&&c>r?Math.abs(i.left+r-c):0),i.top-=Math.min(i.top,i.top+o>s&&s>o?Math.abs(o+d):0),i},_findPos:function(e){for(var i,a=this._getInst(e),r=this._get(a,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,a,r,o,n=this._curInst;!n||e&&n!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(n,"showAnim"),a=this._get(n,"duration"),r=function(){t.tbtDatepicker._tidyDialog(n)},t.effects&&(t.effects.effect[i]||t.effects[i])?n.dpDiv.hide(i,t.tbtDatepicker._get(n,"showOptions"),a,r):n.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,r),i||r(),this._datepickerShowing=!1,(o=this._get(n,"onClose"))&&o.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".tbt-datepicker-calendar")},_checkExternalClick:function(e){if(t.tbtDatepicker._curInst){var i=t(e.target),a=t.tbtDatepicker._getInst(i[0]);(i[0].id!==t.tbtDatepicker._mainDivId&&0===i.parents("#"+t.tbtDatepicker._mainDivId).length&&!i.hasClass(t.tbtDatepicker.markerClassName)&&!i.closest("."+t.tbtDatepicker._triggerClass).length&&t.tbtDatepicker._datepickerShowing&&(!t.tbtDatepicker._inDialog||!t.blockUI)||i.hasClass(t.tbtDatepicker.markerClassName)&&t.tbtDatepicker._curInst!==a)&&t.tbtDatepicker._hideDatepicker()}},_adjustDate:function(e,i,a){var r=t(e),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,i+("M"===a?this._get(o,"showCurrentAtPos"):0),a),this._updateDatepicker(o))},_gotoToday:function(e){var i,a=t(e),r=this._getInst(a[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(i=new Date,r.selectedDay=i.getDate(),r.drawMonth=r.selectedMonth=i.getMonth(),r.drawYear=r.selectedYear=i.getFullYear()),this._notifyChange(r),this._adjustDate(a)},_selectMonthYear:function(e,i,a){var r=t(e),o=this._getInst(r[0]);o["selected"+("M"===a?"Month":"Year")]=o["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(e,i,a,r){var o,n=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((o=this._getInst(n[0])).selectedDay=o.currentDay=t("a",r).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=a,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var a,r=t(e),o=this._getInst(r[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),(a=this._get(o,"onSelect"))?a.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,a,r,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),a=this._getDate(e),r=this.formatDate(i,a,this._getFormatConfig(e)),t(o).val(r))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,a){if(null==e||null==i)throw"Invalid arguments";if(""==(i="object"==typeof i?""+i:i+""))return null;var r,o,n,d,c=0,s=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10),p=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,b=(a?a.dayNames:null)||this._defaults.dayNames,u=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,h=(a?a.monthNames:null)||this._defaults.monthNames,g=-1,k=-1,y=-1,m=-1,f=!1,v=function(t){var i=e.length>r+1&&e.charAt(r+1)===t;return i&&r++,i},x=function(t){var e=v(t),a="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r=RegExp("^\\d{"+("y"===t?a:1)+","+a+"}"),o=i.substring(c).match(r);if(!o)throw"Missing number at position "+c;return c+=o[0].length,parseInt(o[0],10)},D=function(e,a,r){var o=-1,n=t.map(v(e)?r:a,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(n,function(t,e){var a=e[1];return i.substr(c,a.length).toLowerCase()===a.toLowerCase()?(o=e[0],c+=a.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+c},_=function(){if(i.charAt(c)!==e.charAt(r))throw"Unexpected literal at position "+c;c++};for(r=0;e.length>r;r++)if(f)"'"!==e.charAt(r)||v("'")?_():f=!1;else switch(e.charAt(r)){case"d":y=x("d");break;case"D":D("D",p,b);break;case"o":m=x("o");break;case"m":k=x("m");break;case"M":k=D("M",u,h);break;case"y":g=x("y");break;case"@":g=(d=new Date(x("@"))).getFullYear(),k=d.getMonth()+1,y=d.getDate();break;case"!":g=(d=new Date((x("!")-this._ticksTo1970)/1e4)).getFullYear(),k=d.getMonth()+1,y=d.getDate();break;case"'":v("'")?_():f=!0;break;default:_()}if(i.length>c&&(n=i.substr(c),!/^\s+/.test(n)))throw"Extra/unparsed characters found in date: "+n;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=g?0:-100)),m>-1)for(k=1,y=m;!((o=this._getDaysInMonth(g,k-1))>=y);)k++,y-=o;if((d=this._daylightSavingAdjust(new Date(g,k-1,y))).getFullYear()!==g||d.getMonth()+1!==k||d.getDate()!==y)throw"Invalid date";return d},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var a,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,n=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,d=(i?i.monthNames:null)||this._defaults.monthNames,c=function(e){var i=t.length>a+1&&t.charAt(a+1)===e;return i&&a++,i},s=function(t,e,i){var a=""+e;if(c(t))for(;i>a.length;)a="0"+a;return a},l=function(t,e,i,a){return c(t)?a[e]:i[e]},p="",b=!1;if(e)for(a=0;t.length>a;a++)if(b)"'"!==t.charAt(a)||c("'")?p+=t.charAt(a):b=!1;else switch(t.charAt(a)){case"d":p+=s("d",e.getDate(),2);break;case"D":p+=l("D",e.getDay(),r,o);break;case"o":p+=s("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":p+=s("m",e.getMonth()+1,2);break;case"M":p+=l("M",e.getMonth(),n,d);break;case"y":p+=c("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":p+=e.getTime();break;case"!":p+=1e4*e.getTime()+this._ticksTo1970;break;case"'":c("'")?p+="'":b=!0;break;default:p+=t.charAt(a)}return p},_possibleChars:function(t){var e,i="",a=!1,r=function(i){var a=t.length>e+1&&t.charAt(e+1)===i;return a&&e++,a};for(e=0;t.length>e;e++)if(a)"'"!==t.charAt(e)||r("'")?i+=t.charAt(e):a=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":r("'")?i+="'":a=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),o=r,n=this._getFormatConfig(t);try{o=this.parseDate(i,a,n)||r}catch(t){a=e?"":a}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=a?o.getDate():0,t.currentMonth=a?o.getMonth():0,t.currentYear=a?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,a){var r=null==i||""===i?a:"string"==typeof i?function(i){try{return t.tbtDatepicker.parseDate(t.tbtDatepicker._get(e,"dateFormat"),i,t.tbtDatepicker._getFormatConfig(e))}catch(t){}for(var a=(i.toLowerCase().match(/^c/)?t.tbtDatepicker._getDate(e):null)||new Date,r=a.getFullYear(),o=a.getMonth(),n=a.getDate(),d=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=d.exec(i);c;){switch(c[2]||"d"){case"d":case"D":n+=parseInt(c[1],10);break;case"w":case"W":n+=7*parseInt(c[1],10);break;case"m":case"M":o+=parseInt(c[1],10),n=Math.min(n,t.tbtDatepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(c[1],10),n=Math.min(n,t.tbtDatepicker._getDaysInMonth(r,o))}c=d.exec(i)}return new Date(r,o,n)}(i):"number"==typeof i?isNaN(i)?a:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(r=r&&"Invalid Date"==""+r?a:r)&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var a=!e,r=t.selectedMonth,o=t.selectedYear,n=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=n.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=n.getMonth(),t.drawYear=t.selectedYear=t.currentYear=n.getFullYear(),r===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(a?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),a="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.tbtDatepicker._adjustDate(a,-i,"M")},next:function(){t.tbtDatepicker._adjustDate(a,+i,"M")},hide:function(){t.tbtDatepicker._hideDatepicker()},today:function(){t.tbtDatepicker._gotoToday(a)},selectDay:function(){return t.tbtDatepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.tbtDatepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return t.tbtDatepicker._selectMonthYear(a,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,a,r,o,n,d,c,s,l,p,b,u,h,g,k,y,m,f,v,x,D,_,w,j,Q,C,M,T,F,A,I,q,N,R,S,V,Y,O,P=new Date,z=this._daylightSavingAdjust(new Date(P.getFullYear(),P.getMonth(),P.getDate())),K=this._get(t,"isRTL"),E=this._get(t,"showButtonPanel"),H=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),B=this._get(t,"showCurrentAtPos"),L=this._get(t,"stepMonths"),J=1!==U[0]||1!==U[1],$=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(t,"min"),X=this._getMinMaxDate(t,"max"),Z=t.drawMonth-B,tt=t.drawYear;if(0>Z&&(Z+=12,tt--),X)for(e=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-U[0]*U[1]+1,X.getDate())),e=G&&G>e?G:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)0>--Z&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-L,1)),this._getFormatConfig(t)):i,a=this._canAdjustMonth(t,-1,tt,Z)?"<a class='tbt-datepicker-prev tbt-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='tbt-icon tbt-icon-circle-triangle-"+(K?"e":"w")+"'>"+i+"</span></a>":H?"":"<a class='tbt-datepicker-prev tbt-corner-all tbt-state-disabled' title='"+i+"'><span class='tbt-icon tbt-icon-circle-triangle-"+(K?"e":"w")+"'>"+i+"</span></a>",r=this._get(t,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,Z+L,1)),this._getFormatConfig(t)):r,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='tbt-datepicker-next tbt-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='tbt-icon tbt-icon-circle-triangle-"+(K?"w":"e")+"'>"+r+"</span></a>":H?"":"<a class='tbt-datepicker-next tbt-corner-all tbt-state-disabled' title='"+r+"'><span class='tbt-icon tbt-icon-circle-triangle-"+(K?"w":"e")+"'>"+r+"</span></a>",n=this._get(t,"currentText"),d=this._get(t,"gotoCurrent")&&t.currentDay?$:z,n=W?this.formatDate(n,d,this._getFormatConfig(t)):n,c=t.inline?"":"<button type='button' class='tbt-datepicker-close tbt-state-default tbt-priority-primary tbt-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",s=E?"<div class='tbt-datepicker-buttonpane tbt-widget-content'>"+(K?c:"")+(this._isInRange(t,d)?"<button type='button' class='tbt-datepicker-current tbt-state-default tbt-priority-secondary tbt-corner-all' data-handler='today' data-event='click'>"+n+"</button>":"")+(K?"":c)+"</div>":"",l=parseInt(this._get(t,"firstDay"),10),l=isNaN(l)?0:l,p=this._get(t,"showWeek"),b=this._get(t,"dayNames"),u=this._get(t,"dayNamesMin"),h=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),k=this._get(t,"beforeShowDay"),y=this._get(t,"showOtherMonths"),m=this._get(t,"selectOtherMonths"),f=this._getDefaultDate(t),v="",D=0;U[0]>D;D++){for(_="",this.maxRows=4,w=0;U[1]>w;w++){if(j=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),Q=" tbt-corner-all",C="",J){if(C+="<div class='tbt-datepicker-group",U[1]>1)switch(w){case 0:C+=" tbt-datepicker-group-first",Q=" tbt-corner-"+(K?"right":"left");break;case U[1]-1:C+=" tbt-datepicker-group-last",Q=" tbt-corner-"+(K?"left":"right");break;default:C+=" tbt-datepicker-group-middle",Q=""}C+="'>"}for(C+="<div class='tbt-datepicker-header tbt-widget-header tbt-helper-clearfix"+Q+"'>"+(/all|left/.test(Q)&&0===D?K?o:a:"")+(/all|right/.test(Q)&&0===D?K?a:o:"")+this._generateMonthYearHeader(t,Z,tt,G,X,D>0||w>0,h,g)+"</div><table class='tbt-datepicker-calendar'><thead><tr>",M=p?"<th class='tbt-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;7>x;x++)M+="<th scope='col'"+((x+l+6)%7>=5?" class='tbt-datepicker-week-end'":"")+"><span title='"+b[T=(x+l)%7]+"'>"+u[T]+"</span></th>";for(C+=M+"</tr></thead><tbody>",F=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,F)),A=(this._getFirstDayOfMonth(tt,Z)-l+7)%7,I=Math.ceil((A+F)/7),q=J&&this.maxRows>I?this.maxRows:I,this.maxRows=q,N=this._daylightSavingAdjust(new Date(tt,Z,1-A)),R=0;q>R;R++){for(C+="<tr>",S=p?"<td class='tbt-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>":"",x=0;7>x;x++)V=k?k.apply(t.input?t.input[0]:null,[N]):[!0,""],O=(Y=N.getMonth()!==Z)&&!m||!V[0]||G&&G>N||X&&N>X,S+="<td class='"+((x+l+6)%7>=5?" tbt-datepicker-week-end":"")+(Y?" tbt-datepicker-other-month":"")+(N.getTime()===j.getTime()&&Z===t.selectedMonth&&t._keyEvent||f.getTime()===N.getTime()&&f.getTime()===j.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" tbt-state-disabled":"")+(Y&&!y?"":" "+V[1]+(N.getTime()===$.getTime()?" "+this._currentClass:"")+(N.getTime()===z.getTime()?" tbt-datepicker-today":""))+"'"+(Y&&!y||!V[2]?"":" title='"+V[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(Y&&!y?"&#xa0;":O?"<span class='tbt-state-default'>"+N.getDate()+"</span>":"<a class='tbt-state-default"+(N.getTime()===z.getTime()?" tbt-state-highlight":"")+(N.getTime()===$.getTime()?" tbt-state-active":"")+(Y?" tbt-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);C+=S+"</tr>"}++Z>11&&(Z=0,tt++),_+=C+="</tbody></table>"+(J?"</div>"+(U[0]>0&&w===U[1]-1?"<div class='tbt-datepicker-row-break'></div>":""):"")}v+=_}return v+=s,t._keyEvent=!1,v},_generateMonthYearHeader:function(t,e,i,a,r,o,n,d){var c,s,l,p,b,u,h,g,k=this._get(t,"changeMonth"),y=this._get(t,"changeYear"),m=this._get(t,"showMonthAfterYear"),f="<div class='tbt-datepicker-title'>",v="";if(o||!k)v+="<span class='tbt-datepicker-month'>"+n[e]+"</span>";else{for(c=a&&a.getFullYear()===i,s=r&&r.getFullYear()===i,v+="<select class='tbt-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!c||l>=a.getMonth())&&(!s||r.getMonth()>=l)&&(v+="<option value='"+l+"'"+(l===e?" selected='selected'":"")+">"+d[l]+"</option>");v+="</select>"}if(m||(f+=v+(!o&&k&&y?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!y)f+="<span class='tbt-datepicker-year'>"+i+"</span>";else{for(p=this._get(t,"yearRange").split(":"),b=(new Date).getFullYear(),h=(u=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?b+parseInt(t,10):parseInt(t,10);return isNaN(e)?b:e})(p[0]),g=Math.max(h,u(p[1]||"")),h=a?Math.max(h,a.getFullYear()):h,g=r?Math.min(g,r.getFullYear()):g,t.yearshtml+="<select class='tbt-datepicker-year' data-handler='selectYear' data-event='change'>";g>=h;h++)t.yearshtml+="<option value='"+h+"'"+(h===i?" selected='selected'":"")+">"+h+"</option>";t.yearshtml+="</select>",f+=t.yearshtml,t.yearshtml=null}return f+=this._get(t,"yearSuffix"),m&&(f+=(!o&&k&&y?"":"&#xa0;")+v),f+"</div>"},_adjustInstDate:function(t,e,i){var a=t.selectedYear+("Y"===i?e:0),r=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(a,r))+("D"===i?e:0),n=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(a,r,o)));t.selectedDay=n.getDate(),t.drawMonth=t.selectedMonth=n.getMonth(),t.drawYear=t.selectedYear=n.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),r=i&&i>e?i:e;return a&&r>a?a:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,a){var r=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,a+(0>e?e:r[0]*r[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,a,r=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),n=null,d=null,c=this._get(t,"yearRange");return c&&(i=c.split(":"),a=(new Date).getFullYear(),n=parseInt(i[0],10),d=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(n+=a),i[1].match(/[+\-].*/)&&(d+=a)),(!r||e.getTime()>=r.getTime())&&(!o||e.getTime()<=o.getTime())&&(!n||e.getFullYear()>=n)&&(!d||d>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,a){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(a,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.tbtDatepicker=function(e){if(!this.length)return this;t.tbtDatepicker.initialized||(t(document).on("mousedown",t.tbtDatepicker._checkExternalClick),t.tbtDatepicker.initialized=!0),0===t("#"+t.tbtDatepicker._mainDivId).length&&t("body").append(t.tbtDatepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.tbtDatepicker["_"+e+"Datepicker"].apply(t.tbtDatepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.tbtDatepicker["_"+e+"Datepicker"].apply(t.tbtDatepicker,[this].concat(i)):t.tbtDatepicker._attachDatepicker(this,e)}):t.tbtDatepicker["_"+e+"Datepicker"].apply(t.tbtDatepicker,[this[0]].concat(i))},t.tbtDatepicker=new e,t.tbtDatepicker.initialized=!1,t.tbtDatepicker.uuid=(new Date).getTime(),t.tbtDatepicker.version="1.12.1",t.tbtDatepicker},"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}
</script>